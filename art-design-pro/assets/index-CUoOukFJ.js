var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,n=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(o)for(var t of o(a))r.call(a,t)&&i(e,t,a[t]);return e},s=(e,o)=>a(e,t(o));import{g as u,a as d}from"./echarts-BFUSwzT2.js";import{d as c,a as y,c as h,a5 as f,o as m,b as p,J as v,aO as g,e as b,f as x,g as w,H as A,cV as L}from"./index-IQGo8WxO.js";import{u as S,b as O}from"./useChart-Br6uFGk0.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";const j=_(c(s(n({},{name:"ArtLineChart"}),{__name:"index",props:{data:{default:()=>[0,0,0,0,0,0,0]},xAxisData:{default:()=>[]},lineWidth:{default:2.5},showAreaColor:{type:Boolean,default:!1},smooth:{type:Boolean,default:!0},symbol:{default:"none"},symbolSize:{default:6},animationDelay:{default:200},height:{default:S().chartHeight},loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},colors:{default:()=>S().colors},showAxisLabel:{type:Boolean,default:!0},showAxisLine:{type:Boolean,default:!0},showSplitLine:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!1},legendPosition:{default:"bottom"}},setup(e){const a=e,{chartRef:t,isDark:o,initChart:l,getAxisLineStyle:r,getAxisLabelStyle:i,getAxisTickStyle:c,getSplitLineStyle:S,getTooltipStyle:_,getLegendStyle:j,getGridWithLegend:D}=O(),B=y(!1),T=y(),P=y([]),W=()=>{T.value&&(clearTimeout(T.value),T.value=void 0)},C=h((()=>{if(a.isEmpty)return!0;if(Array.isArray(a.data)&&"number"==typeof a.data[0]){const e=a.data;return!e.length||e.every((e=>0===e))}if(Array.isArray(a.data)&&"object"==typeof a.data[0]){const e=a.data;return!e.length||e.every((e=>{var a;return!(null==(a=e.data)?void 0:a.length)||e.data.every((e=>0===e))}))}return!0})),E=h((()=>Array.isArray(a.data)&&a.data.length>0&&"object"==typeof a.data[0]&&"name"in a.data[0])),G=h((()=>{if(E.value){return a.data.reduce(((e,a)=>{var t;if(null==(t=a.data)?void 0:t.length){const t=Math.max(...a.data);return Math.max(e,t)}return e}),0)}{const e=a.data;return(null==e?void 0:e.length)?Math.max(...e):0}})),k=()=>{if(E.value){return a.data.map((e=>s(n({},e),{data:new Array(e.data.length).fill(0)})))}{const e=a.data;return new Array(e.length).fill(0)}},z=()=>(E.value,[...a.data]),M=(e,t)=>e||(void 0!==t?a.colors[t%a.colors.length]:A("--el-color-primary")),V=e=>{var t,o,l,r,i;return{name:e.name,data:e.data,type:"line",color:e.color,smooth:null!=(t=e.smooth)?t:a.smooth,symbol:null!=(o=e.symbol)?o:a.symbol,symbolSize:null!=(l=e.symbolSize)?l:a.symbolSize,lineStyle:{width:null!=(r=e.lineWidth)?r:a.lineWidth,color:e.color},areaStyle:e.areaStyle,emphasis:{focus:"series",lineStyle:{width:(null!=(i=e.lineWidth)?i:a.lineWidth)+1}}}},H=(e=!1)=>{const t={animation:!0,animationDuration:e?0:1300,animationDurationUpdate:e?0:1300,grid:D(a.showLegend&&E.value,a.legendPosition,{top:15,right:15,left:0}),tooltip:a.showTooltip?_():void 0,xAxis:{type:"category",boundaryGap:!1,data:a.xAxisData,axisTick:c(),axisLine:r(a.showAxisLine),axisLabel:i(a.showAxisLabel)},yAxis:{type:"value",min:0,max:G.value,axisLabel:i(a.showAxisLabel),axisLine:r(a.showAxisLine),splitLine:S(a.showSplitLine)}};if(a.showLegend&&E.value&&(t.legend=j(a.legendPosition)),E.value){const e=P.value;t.series=e.map(((e,t)=>{const o=M(a.colors[t],t),l=((e,t)=>{if(!e.areaStyle&&!e.showAreaColor&&!a.showAreaColor)return;const o=e.areaStyle||{};return o.custom?o.custom:{color:new d.LinearGradient(0,0,0,1,[{offset:0,color:L(t,o.startOpacity||.2).rgba},{offset:1,color:L(t,o.endOpacity||.02).rgba}])}})(e,o);return V({name:e.name,data:e.data,color:o,smooth:e.smooth,symbol:e.symbol,lineWidth:e.lineWidth,areaStyle:l})}))}else{const e=P.value,o=M(a.colors[0]),l=(()=>{if(!a.showAreaColor)return;const e=M(a.colors[0]);return{color:new d.LinearGradient(0,0,0,1,[{offset:0,color:L(e,.2).rgba},{offset:1,color:L(e,.02).rgba}])}})();t.series=[V({data:e,color:o,areaStyle:l})]}return t},I=e=>{l(e,C.value)},R=()=>{if(C.value)P.value=z(),I(H(!1));else if(W(),B.value=!0,E.value){const e=a.data;P.value=k(),I(H(!0)),e.forEach(((e,t)=>{setTimeout((()=>{const a=P.value;a[t]=n({},e),P.value=[...a],I(H(!1))}),t*a.animationDelay+100)}));const t=(e.length-1)*a.animationDelay+1500;setTimeout((()=>{B.value=!1}),t)}else P.value=k(),I(H(!0)),T.value=setTimeout((()=>{P.value=z(),I(H(!1)),B.value=!1}),100)},F=()=>{R()},J=()=>{R()};return f([()=>a.data,()=>a.xAxisData,()=>a.colors],(()=>{B.value||F()}),{deep:!0}),f(o,(()=>{var e;const a=(null==(e=t.value)?void 0:e.__echart__)||u(t.value);if(a&&!C.value){const e=H(!1);a.setOption(e)}})),m((()=>{F(),t.value&&t.value.addEventListener("chartVisible",J)})),p((()=>{W(),t.value&&t.value.removeEventListener("chartVisible",J)})),(e,o)=>{const l=g;return v((x(),b("div",{ref_key:"chartRef",ref:t,class:"art-line-chart",style:w({height:a.height})},null,4)),[[l,a.loading]])}}})),[["__scopeId","data-v-753ec7d3"]]);export{j as _};
