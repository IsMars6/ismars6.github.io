var e=Object.defineProperty,l=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,t=(l,n,s)=>n in l?e(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s;import{d as r,v as c,c as u,e as o,f as p,h as d,m,l as v,z as f,C as _,aa as g,u as h,db as b,dd as y,de as P,bs as R}from"./index-IQGo8WxO.js";import{E as j}from"./index-CE6ES6Vp.js";import{E as x}from"./index-BSQc1V3V.js";import{E,a as w}from"./index-DZFTdRQR.js";import{E as A}from"./index-DRTMnRQ8.js";import{E as O}from"./index-DEh6ra0d.js";import{_ as z}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./use-form-common-props-AkxMGj96.js";const U={class:"page-visibility-page"},V={class:"page-header"},C={class:"success-card"},S={class:"success-content"},I={class:"success-info"},k={class:"success-text"},D={class:"permission-explanation"},F={class:"explanation-content"},L={class:"best-practices"},M={class:"practices-content"},N={class:"practice-item"},B={class:"practice-icon"},H={class:"practice-item"},Q={class:"practice-icon"},T={class:"practice-item"},X={class:"practice-icon"},$={class:"practice-item"},q={class:"practice-icon"},G=r((J=((e,l)=>{for(var n in l||(l={}))i.call(l,n)&&t(e,n,l[n]);if(s)for(var n of s(l))a.call(l,n)&&t(e,n,l[n]);return e})({},{name:"PermissionPageVisibility"}),l(J,n({__name:"index",setup(e){const l=c(),n=u((()=>l.info));return(e,l)=>{const s=j,i=x,a=w,t=E,r=g,c=O,u=A;return p(),o("div",U,[d("div",V,[d("h2",null,m(e.$t("menus.examples.permission.pageVisibility")),1),l[0]||(l[0]=d("p",{class:"description"},[v(" 此页面仅对"),d("strong",null,"超级管理员"),v("用户可见，演示页面级别的权限控制。 如果您能看到此页面，说明您拥有相应的访问权限。 ")],-1))]),d("div",C,[f(i,{shadow:"never"},{header:_((()=>l[1]||(l[1]=[d("div",{class:"card-header"},[d("span",null,"权限验证成功")],-1)]))),default:_((()=>[d("div",S,[d("div",I,[d("div",k,[l[4]||(l[4]=d("h3",null,"您拥有访问此页面的权限",-1)),d("p",null,[l[2]||(l[2]=v(" 当前用户：")),d("strong",null,m(n.value.userName),1)]),d("p",null,[l[3]||(l[3]=v(" 用户角色： ")),f(s,{type:"warning"},{default:_((()=>{var e,l;return[v(m((l=(null==(e=n.value.roles)?void 0:e[0])||"",{R_SUPER:"超级管理员",R_ADMIN:"管理员",R_USER:"普通用户"}[l]||"未知角色")),1)]})),_:1})])])])])])),_:1})]),d("div",D,[f(i,{shadow:"never"},{header:_((()=>l[5]||(l[5]=[d("div",{class:"card-header"},[d("span",null,"页面级权限控制说明")],-1)]))),default:_((()=>[d("div",F,[f(t,null,{default:_((()=>[f(a,{timestamp:"前端控制模式",type:"primary",size:"large"},{default:_((()=>[f(i,{shadow:"never"},{default:_((()=>l[6]||(l[6]=[d("h4",null,"基于角色的权限控制",-1),d("p",null,[v(" 在前端控制模式下，页面访问权限由路由配置文件中的 "),d("code",null,"meta.roles"),v(" 字段定义，前端会根据用户接口所拥有的角色对路由和菜单进行过滤与控制 ")],-1),d("pre",null,[d("code",null,"{\n  path: 'page-visibility',\n  name: 'PermissionPageVisibility',\n  component: RoutesAlias.PermissionPageVisibility,\n  meta: {\n    title: 'menus.permission.pageVisibility',\n    roles: ['R_SUPER'], // 仅超级管理员可访问\n    keepAlive: true\n  }\n}")],-1),d("p",null,[d("strong",null,"权限验证流程：")],-1),d("ul",null,[d("li",null,"用户登录后，接口返回用户角色信息（如 R_SUPER、R_ADMIN、R_USER）"),d("li",null,[v(" 在 "),d("code",null,"beforeEach"),v(" 路由守卫中检查目标路由的 "),d("code",null,"roles"),v(" 配置 ")]),d("li",null,"比较用户角色是否包含在允许访问的角色列表中"),d("li",null,"权限不足时跳转到 403 页面")],-1)]))),_:1,__:[6]})])),_:1}),f(a,{timestamp:"后端控制模式",type:"warning",size:"large"},{default:_((()=>[f(i,{shadow:"never"},{default:_((()=>l[7]||(l[7]=[d("h4",null,"基于菜单接口的权限控制",-1),d("p",null,"在后端控制模式下，页面访问权限由后端统一管理，前端通过解析后端接口返回的菜单列表来生成可访问的路由，从而实现权限控制",-1),d("p",null,"接口地址：src/api/menuApi.ts getMenuList",-1),d("pre",null,[d("code",null,'\n{\n  "code": 200,\n  "data": [\n    {\n      "id": 1,\n      "path": "/permission",\n      "name": "Permission",\n      "component": "Layout",\n      "meta": {\n        "title": "menus.permission.title",\n        "icon": ""\n      },\n      "children": [\n        {\n          "id": 11,\n          "path": "page-visibility",\n          "name": "PermissionPageVisibility",\n          "component": "permission/page-visibility/index",\n          "meta": {\n            "title": "menus.permission.pageVisibility",\n            "keepAlive": true\n          }\n        }\n      ]\n    }\n  ]\n}')],-1),d("p",null,[d("strong",null,"权限验证流程：")],-1),d("ul",null,[d("li",null,"用户登录成功后获取 Token"),d("li",null,"前端调用菜单接口获取用户可访问的菜单列表"),d("li",null,"前端根据菜单列表动态注册路由"),d("li",null,"菜单中存在的页面用户可以正常访问，不存在的页面会跳转到 404")],-1)]))),_:1,__:[7]})])),_:1}),f(a,{timestamp:"菜单显示控制",type:"success",size:"large"},{default:_((()=>[f(i,{shadow:"never"},{default:_((()=>l[8]||(l[8]=[d("h4",null,"侧边栏菜单可见性",-1),d("p",null,[d("strong",null,"前端控制模式：")],-1),d("ul",null,[d("li",null,"有权限的用户：菜单项正常显示，可以点击访问"),d("li",null,"无权限的用户：菜单项不显示，无法通过菜单导航到页面"),d("li",null,"即使通过直接输入URL尝试访问，也会被路由守卫拦截")],-1),d("p",null,[d("strong",null,"后端控制模式：")],-1),d("ul",null,[d("li",null,"侧边栏菜单根据后端返回的菜单列表进行渲染"),d("li",null,"后端应该根据用户权限过滤，只返回用户有权限访问的菜单项"),d("li",null,"前端只显示后端返回的菜单，确保用户只能看到和访问有权限的页面")],-1)]))),_:1,__:[8]})])),_:1})])),_:1})])])),_:1})]),d("div",L,[f(i,{shadow:"never"},{header:_((()=>l[9]||(l[9]=[d("div",{class:"card-header"},[d("span",null,"权限控制最佳实践")],-1)]))),default:_((()=>[d("div",M,[f(u,{gutter:24},{default:_((()=>[f(c,{span:12},{default:_((()=>[d("div",N,[d("div",B,[f(r,{size:"20",color:"#409EFF"},{default:_((()=>[f(h(b))])),_:1})]),l[10]||(l[10]=d("div",{class:"practice-content"},[d("h4",null,"多层权限验证"),d("p",null,"在前端路由、后端接口、UI组件等多个层面实施权限控制，确保安全性。")],-1))])])),_:1}),f(c,{span:12},{default:_((()=>[d("div",H,[d("div",Q,[f(r,{size:"20",color:"#67C23A"},{default:_((()=>[f(h(y))])),_:1})]),l[11]||(l[11]=d("div",{class:"practice-content"},[d("h4",null,"基于角色的访问控制"),d("p",null,"采用RBAC模型，通过角色分配权限，简化权限管理复杂度。")],-1))])])),_:1}),f(c,{span:12},{default:_((()=>[d("div",T,[d("div",X,[f(r,{size:"20",color:"#E6A23C"},{default:_((()=>[f(h(P))])),_:1})]),l[12]||(l[12]=d("div",{class:"practice-content"},[d("h4",null,"细粒度权限控制"),d("p",null,"支持页面级、按钮级、数据级等多种粒度的权限控制。")],-1))])])),_:1}),f(c,{span:12},{default:_((()=>[d("div",$,[d("div",q,[f(r,{size:"20",color:"#F56C6C"},{default:_((()=>[f(h(R))])),_:1})]),l[13]||(l[13]=d("div",{class:"practice-content"},[d("h4",null,"安全性优先原则"),d("p",null,"始终遵循最小权限原则，确保用户只能访问必要的功能和数据。")],-1))])])),_:1})])),_:1})])])),_:1})])])}}}))));var J;const K=z(G,[["__scopeId","data-v-273a4c5b"]]);export{K as default};
