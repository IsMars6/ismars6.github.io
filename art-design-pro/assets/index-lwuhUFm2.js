var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,i=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e},r=(e,o)=>t(e,a(o)),u=(e,t,a)=>new Promise(((o,n)=>{var l=e=>{try{i(a.next(e))}catch(t){n(t)}},s=e=>{try{i(a.throw(e))}catch(t){n(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,s);i((a=a.apply(e,t)).next())}));import{bk as p,aS as d,a9 as c,a0 as f,ah as m,aj as v,ad as y,aV as h,d as b,br as g,bb as x,c as w,V as S,aw as C,a as k,bi as z,bs as P,bt as j,ag as E,ak as I,a5 as O,n as F,o as V,am as $,e as B,f as N,k as _,F as M,h as R,i as H,u as T,j as L,G as W,C as A,as as U,aa as D,W as K,z as G,bn as J,az as Y,bu as q,m as Q,g as X,af as Z,_ as ee,an as te}from"./index-IQGo8WxO.js";import{u as ae}from"./index-Bi9RLQBv.js";import{U as oe,I as ne,C as le}from"./event-BwRzfsZt.js";import{u as se}from"./index-BfOxij12.js";import{u as ie,a as re}from"./use-form-item-M_69vDeD.js";import{u as ue,a as pe}from"./use-form-common-props-AkxMGj96.js";import{a as de,u as ce}from"./index-jcv93Qxd.js";import{d as fe}from"./error-D_Dr4eZ1.js";let me;const ve={height:"0",visibility:"hidden",overflow:p&&/firefox/i.test(window.navigator.userAgent)?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function he(e,t=1,a){var o;me||(me=document.createElement("textarea"),document.body.appendChild(me));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ye.map((e=>[e,t.getPropertyValue(e)])),paddingSize:o,borderSize:n,boxSizing:a}}(e);i.forEach((([e,t])=>null==me?void 0:me.style.setProperty(e,t))),Object.entries(ve).forEach((([e,t])=>null==me?void 0:me.style.setProperty(e,t,"important"))),me.value=e.value||e.placeholder||"";let r=me.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),me.value="";const p=me.scrollHeight-n;if(d(t)){let e=p*t;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(d(a)){let e=p*a;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=me.parentNode)||o.removeChild(me),me=void 0,u}const be=f(r(i({id:{type:String,default:void 0},size:h,disabled:Boolean,modelValue:{type:m([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:m([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:y},prefixIcon:{type:y},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:m([Object,Array,String]),default:()=>v({})},autofocus:Boolean,rows:{type:Number,default:2}},ae(["ariaLabel"])),{inputmode:{type:m(String),default:void 0},name:String})),ge={[oe]:e=>c(e),input:e=>c(e),change:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const xe=b({name:"ElInput",inheritAttrs:!1});const we=te(ee(b(r(i({},xe),{props:be,emits:ge,setup(e,{expose:t,emit:a}){const o=e,n=g(),l=se(),s=x(),r=w((()=>["textarea"===o.type?b.b():h.b(),h.m(v.value),h.is("disabled",y.value),h.is("exceed",Be.value),{[h.b("group")]:s.prepend||s.append,[h.m("prefix")]:s.prefix||o.prefixIcon,[h.m("suffix")]:s.suffix||o.suffixIcon||o.clearable||o.showPassword,[h.bm("suffix","password-clear")]:Oe.value&&Fe.value,[h.b("hidden")]:"hidden"===o.type},n.class])),d=w((()=>[h.e("wrapper"),h.is("focus",xe.value)])),{form:c,formItem:f}=ie(),{inputId:m}=re(o,{formItemContext:f}),v=ue(),y=pe(),h=S("input"),b=S("textarea"),ee=C(),te=C(),ae=k(!1),me=k(!1),ve=k(),ye=C(o.inputStyle),be=w((()=>ee.value||te.value)),{wrapperRef:ge,isFocused:xe,handleFocus:we,handleBlur:Se}=de(be,{disabled:y,afterBlur(){var e;o.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"blur").catch((e=>fe())))}}),Ce=w((()=>{var e;return null!=(e=null==c?void 0:c.statusIcon)&&e})),ke=w((()=>(null==f?void 0:f.validateState)||"")),ze=w((()=>ke.value&&z[ke.value])),Pe=w((()=>me.value?P:j)),je=w((()=>[n.style])),Ee=w((()=>[o.inputStyle,ye.value,{resize:o.resize}])),Ie=w((()=>E(o.modelValue)?"":String(o.modelValue))),Oe=w((()=>o.clearable&&!y.value&&!o.readonly&&!!Ie.value&&(xe.value||ae.value))),Fe=w((()=>o.showPassword&&!y.value&&!!Ie.value)),Ve=w((()=>o.showWordLimit&&!!o.maxlength&&("text"===o.type||"textarea"===o.type)&&!y.value&&!o.readonly&&!o.showPassword)),$e=w((()=>Ie.value.length)),Be=w((()=>!!Ve.value&&$e.value>Number(o.maxlength))),Ne=w((()=>!!s.suffix||!!o.suffixIcon||Oe.value||o.showPassword||Ve.value||!!ke.value&&Ce.value)),[_e,Me]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(ee);I(te,(e=>{if(He(),!Ve.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;ve.value={right:`calc(100% - ${a+15+6}px)`}}));const Re=()=>{const{type:e,autosize:t}=o;if(p&&"textarea"===e&&te.value)if(t){const e=Z(t)?t.minRows:void 0,a=Z(t)?t.maxRows:void 0,o=he(te.value,e,a);ye.value=i({overflowY:"hidden"},o),F((()=>{te.value.offsetHeight,ye.value=o}))}else ye.value={minHeight:he(te.value).minHeight}},He=(e=>{let t=!1;return()=>{var a;if(t||!o.autosize)return;null===(null==(a=te.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Re),Te=()=>{const e=be.value,t=o.formatter?o.formatter(Ie.value):Ie.value;e&&e.value!==t&&(e.value=t)},Le=e=>u(this,null,(function*(){_e();let{value:t}=e.target;o.formatter&&o.parser&&(t=o.parser(t)),Ae.value||(t!==Ie.value?(a(oe,t),a(ne,t),yield F(),Te(),Me()):Te())})),We=e=>{let{value:t}=e.target;o.formatter&&o.parser&&(t=o.parser(t)),a(le,t)},{isComposing:Ae,handleCompositionStart:Ue,handleCompositionUpdate:De,handleCompositionEnd:Ke}=ce({emit:a,afterComposition:Le}),Ge=()=>{_e(),me.value=!me.value,setTimeout(Me)},Je=e=>{ae.value=!1,a("mouseleave",e)},Ye=e=>{ae.value=!0,a("mouseenter",e)},qe=e=>{a("keydown",e)},Qe=()=>{a(oe,""),a(le,""),a("clear"),a(ne,"")};return O((()=>o.modelValue),(()=>{var e;F((()=>Re())),o.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"change").catch((e=>fe())))})),O(Ie,(()=>Te())),O((()=>o.type),(()=>u(this,null,(function*(){yield F(),Te(),Re()})))),V((()=>{!o.formatter&&o.parser,Te(),F(Re)})),t({input:ee,textarea:te,ref:be,textareaStyle:Ee,autosize:$(o,"autosize"),isComposing:Ae,focus:()=>{var e;return null==(e=be.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=be.value)?void 0:e.blur()},select:()=>{var e;null==(e=be.value)||e.select()},clear:Qe,resizeTextarea:Re}),(e,t)=>(N(),B("div",{class:H([T(r),{[T(h).bm("group","append")]:e.$slots.append,[T(h).bm("group","prepend")]:e.$slots.prepend}]),style:X(T(je)),onMouseenter:Ye,onMouseleave:Je},[_(" input "),"textarea"!==e.type?(N(),B(M,{key:0},[_(" prepend slot "),e.$slots.prepend?(N(),B("div",{key:0,class:H(T(h).be("group","prepend"))},[L(e.$slots,"prepend")],2)):_("v-if",!0),R("div",{ref_key:"wrapperRef",ref:ge,class:H(T(d))},[_(" prefix slot "),e.$slots.prefix||e.prefixIcon?(N(),B("span",{key:0,class:H(T(h).e("prefix"))},[R("span",{class:H(T(h).e("prefix-inner"))},[L(e.$slots,"prefix"),e.prefixIcon?(N(),W(T(D),{key:0,class:H(T(h).e("icon"))},{default:A((()=>[(N(),W(U(e.prefixIcon)))])),_:1},8,["class"])):_("v-if",!0)],2)],2)):_("v-if",!0),R("input",K({id:T(m),ref_key:"input",ref:ee,class:T(h).e("inner")},T(l),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?me.value?"text":"password":e.type,disabled:T(y),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:T(Ue),onCompositionupdate:T(De),onCompositionend:T(Ke),onInput:Le,onChange:We,onKeydown:qe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),_(" suffix slot "),T(Ne)?(N(),B("span",{key:1,class:H(T(h).e("suffix"))},[R("span",{class:H(T(h).e("suffix-inner"))},[T(Oe)&&T(Fe)&&T(Ve)?_("v-if",!0):(N(),B(M,{key:0},[L(e.$slots,"suffix"),e.suffixIcon?(N(),W(T(D),{key:0,class:H(T(h).e("icon"))},{default:A((()=>[(N(),W(U(e.suffixIcon)))])),_:1},8,["class"])):_("v-if",!0)],64)),T(Oe)?(N(),W(T(D),{key:1,class:H([T(h).e("icon"),T(h).e("clear")]),onMousedown:Y(T(q),["prevent"]),onClick:Qe},{default:A((()=>[G(T(J))])),_:1},8,["class","onMousedown"])):_("v-if",!0),T(Fe)?(N(),W(T(D),{key:2,class:H([T(h).e("icon"),T(h).e("password")]),onClick:Ge},{default:A((()=>[(N(),W(U(T(Pe))))])),_:1},8,["class"])):_("v-if",!0),T(Ve)?(N(),B("span",{key:3,class:H(T(h).e("count"))},[R("span",{class:H(T(h).e("count-inner"))},Q(T($e))+" / "+Q(e.maxlength),3)],2)):_("v-if",!0),T(ke)&&T(ze)&&T(Ce)?(N(),W(T(D),{key:4,class:H([T(h).e("icon"),T(h).e("validateIcon"),T(h).is("loading","validating"===T(ke))])},{default:A((()=>[(N(),W(U(T(ze))))])),_:1},8,["class"])):_("v-if",!0)],2)],2)):_("v-if",!0)],2),_(" append slot "),e.$slots.append?(N(),B("div",{key:1,class:H(T(h).be("group","append"))},[L(e.$slots,"append")],2)):_("v-if",!0)],64)):(N(),B(M,{key:1},[_(" textarea "),R("textarea",K({id:T(m),ref_key:"textarea",ref:te,class:[T(b).e("inner"),T(h).is("focus",T(xe))]},T(l),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:T(y),readonly:e.readonly,autocomplete:e.autocomplete,style:T(Ee),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:T(Ue),onCompositionupdate:T(De),onCompositionend:T(Ke),onInput:Le,onFocus:T(we),onBlur:T(Se),onChange:We,onKeydown:qe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),T(Ve)?(N(),B("span",{key:0,style:X(ve.value),class:H(T(h).e("count"))},Q(T($e))+" / "+Q(e.maxlength),7)):_("v-if",!0)],64))],38))}})),[["__file","input.vue"]]));export{we as E};
