import{a as e,E as a}from"./index-DvdSgfWH.js";import{E as l}from"./index-lwuhUFm2.js";import{E as o}from"./index-CHo-omvL.js";import{E as r}from"./index-BKGyGajh.js";import{E as t}from"./index-DlgK5ZY7.js";import{d,c as i,a as s,r as m,a5 as n,G as u,f as p,C as c,z as j,u as f,h as g,l as _,I as x,O as V}from"./index-IQGo8WxO.js";import{_ as b}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./use-form-common-props-AkxMGj96.js";import"./castArray-CEnBrsUU.js";import"./error-D_Dr4eZ1.js";import"./index-CId84KWp.js";import"./_baseClone-GChKn-ks.js";import"./_Uint8Array-C6UxRYqY.js";import"./index-Bi9RLQBv.js";import"./_initCloneObject-9acmKUcz.js";import"./event-BwRzfsZt.js";import"./index-BfOxij12.js";import"./use-form-item-M_69vDeD.js";import"./index-jcv93Qxd.js";import"./aria-BWz5Vf1b.js";import"./validator-3LCelPuQ.js";import"./index-BI2hd7RK.js";import"./index-ClZ4RRhL.js";import"./vnode-CPGJC5yZ.js";import"./scroll-CpQYakkq.js";import"./index-CVDCfo3G.js";import"./use-dialog-HEYsGeDR.js";import"./index-DyKybXYc.js";import"./refs-B-58sHkE.js";const v={class:"dialog-footer"},y=b(d({__name:"role-edit-dialog",props:{modelValue:{type:Boolean,default:!1},dialogType:{default:"add"},roleData:{default:void 0}},emits:["update:modelValue","success"],setup(d,{emit:b}){const y=d,C=b,h=i({get:()=>y.modelValue,set:e=>C("update:modelValue",e)}),D=s(),N=m({roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),T=m({roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0});n((()=>y.modelValue),(e=>{e&&w()}),{immediate:!0}),n((()=>y.roleData),(e=>{e&&y.modelValue&&w()}),{deep:!0});const w=()=>{"edit"===y.dialogType&&y.roleData?Object.assign(T,{roleId:y.roleData.roleId,roleName:y.roleData.roleName,roleCode:y.roleData.roleCode,description:y.roleData.description,createTime:y.roleData.createTime,enabled:y.roleData.enabled}):Object.assign(T,{roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0})},U=()=>{var e;h.value=!1,null==(e=D.value)||e.resetFields()},E=()=>{return e=this,a=null,l=function*(){if(D.value)try{yield D.value.validate();const e="add"===y.dialogType?"新增成功":"修改成功";V.success(e),C("success"),U()}catch(e){}},new Promise(((o,r)=>{var t=e=>{try{i(l.next(e))}catch(a){r(a)}},d=e=>{try{i(l.throw(e))}catch(a){r(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,d);i((l=l.apply(e,a)).next())}));var e,a,l};return(d,i)=>{const s=l,m=a,n=o,V=e,b=r,y=t;return p(),u(y,{modelValue:f(h),"onUpdate:modelValue":i[4]||(i[4]=e=>x(h)?h.value=e:null),title:"add"===d.dialogType?"新增角色":"编辑角色",width:"30%","align-center":"",onClose:U},{footer:c((()=>[g("div",v,[j(b,{onClick:U},{default:c((()=>i[5]||(i[5]=[_("取消")]))),_:1,__:[5]}),j(b,{type:"primary",onClick:E},{default:c((()=>i[6]||(i[6]=[_("提交")]))),_:1,__:[6]})])])),default:c((()=>[j(V,{ref_key:"formRef",ref:D,model:f(T),rules:f(N),"label-width":"120px"},{default:c((()=>[j(m,{label:"角色名称",prop:"roleName"},{default:c((()=>[j(s,{modelValue:f(T).roleName,"onUpdate:modelValue":i[0]||(i[0]=e=>f(T).roleName=e)},null,8,["modelValue"])])),_:1}),j(m,{label:"角色编码",prop:"roleCode"},{default:c((()=>[j(s,{modelValue:f(T).roleCode,"onUpdate:modelValue":i[1]||(i[1]=e=>f(T).roleCode=e)},null,8,["modelValue"])])),_:1}),j(m,{label:"描述",prop:"description"},{default:c((()=>[j(s,{modelValue:f(T).description,"onUpdate:modelValue":i[2]||(i[2]=e=>f(T).description=e),type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),j(m,{label:"启用"},{default:c((()=>[j(n,{modelValue:f(T).enabled,"onUpdate:modelValue":i[3]||(i[3]=e=>f(T).enabled=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-41d78e59"]]);export{y as default};
