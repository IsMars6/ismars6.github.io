var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))d.call(a,t)&&r(e,t,a[t]);return e},o=(e,l)=>a(e,t(l));import{af as i,a0 as c,ah as u,b6 as p,c as m,_ as y,d as v,V as f,e as g,f as h,k as b,h as k,F as D,D as j,m as x,u as w,i as _,j as O,a as V,ae as Y,d5 as C,z as $,C as S,l as M,b5 as P,aT as U,b4 as E,G as I,an as R,az as A,I as z}from"./index-IQGo8WxO.js";import{E as F,a as q}from"./index-BKGyGajh.js";import{r as H,d as T,l as W,W as G,E as J}from"./index-BgexRGDI.js";import{I as B,U as K}from"./event-BwRzfsZt.js";import{a as L,E as N}from"./index-DvdSgfWH.js";import{E as X}from"./index-lwuhUFm2.js";import{a as Z,b as Q}from"./index-xoN2v133.js";import{E as ee}from"./index-DlgK5ZY7.js";import{_ as ae}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BI2hd7RK.js";import"./use-form-item-M_69vDeD.js";import"./index-CId84KWp.js";import"./use-form-common-props-AkxMGj96.js";import"./index-DC4nx5T3.js";import"./index-Bi9RLQBv.js";import"./index-CVDCfo3G.js";import"./aria-BWz5Vf1b.js";import"./index-CAywqtFc.js";import"./error-D_Dr4eZ1.js";import"./index-B1KT8ZNG.js";import"./debounce-Ce2MWZXC.js";import"./index-DBDo8sc3.js";import"./index-BfOxij12.js";import"./index-jcv93Qxd.js";import"./isEqual-DovbVL_y.js";import"./_Uint8Array-C6UxRYqY.js";import"./castArray-CEnBrsUU.js";import"./_baseClone-GChKn-ks.js";import"./_initCloneObject-9acmKUcz.js";import"./index-ClZ4RRhL.js";import"./vnode-CPGJC5yZ.js";import"./scroll-CpQYakkq.js";import"./use-dialog-HEYsGeDR.js";import"./index-DyKybXYc.js";import"./refs-B-58sHkE.js";const te=c({selectedDay:{type:u(Object)},range:{type:u(Array)},date:{type:u(Object),required:!0},hideHeader:{type:Boolean}}),le={pick:e=>i(e)},ne=(e,a)=>{T.extend(W);const t=T.localeData().firstDayOfWeek(),{t:l,lang:n}=p(),d=T().locale(n.value),r=m((()=>!!e.range&&!!e.range.length)),s=m((()=>{let a=[];if(r.value){const[t,l]=e.range,n=H(l.date()-t.date()+1).map((e=>({text:t.date()+e,type:"current"})));let d=n.length%7;d=0===d?0:7-d;const r=H(d).map(((e,a)=>({text:a+1,type:"next"})));a=n.concat(r)}else{const l=e.date.startOf("month").day(),n=((e,a)=>{const t=e.subtract(1,"month").endOf("month").date();return H(a).map(((e,l)=>t-(a-l-1)))})(e.date,(l-t+7)%7).map((e=>({text:e,type:"prev"}))),d=(e=>{const a=e.daysInMonth();return H(a).map(((e,a)=>a+1))})(e.date).map((e=>({text:e,type:"current"})));a=[...n,...d];const r=7-(a.length%7||7),s=H(r).map(((e,a)=>({text:a+1,type:"next"})));a=a.concat(s)}return(e=>H(e.length/7).map((a=>{const t=7*a;return e.slice(t,t+7)})))(a)})),o=m((()=>{const e=t;return 0===e?G.map((e=>l(`el.datepicker.weeks.${e}`))):G.slice(e).concat(G.slice(0,e)).map((e=>l(`el.datepicker.weeks.${e}`)))})),i=(a,t)=>{switch(t){case"prev":return e.date.startOf("month").subtract(1,"month").date(a);case"next":return e.date.startOf("month").add(1,"month").date(a);case"current":return e.date.date(a)}};return{now:d,isInRange:r,rows:s,weekDays:o,getFormattedDate:i,handlePickDay:({text:e,type:t})=>{const l=i(e,t);a("pick",l)},getSlotData:({text:a,type:t})=>{const l=i(a,t);return{isSelected:l.isSame(e.selectedDay),type:`${t}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},de=v({name:"DateTable"});var re=y(v(o(s({},de),{props:te,emits:le,setup(e,{expose:a,emit:t}){const l=e,{isInRange:n,now:d,rows:r,weekDays:s,getFormattedDate:o,handlePickDay:i,getSlotData:c}=ne(l,t),u=f("calendar-table"),p=f("calendar-day"),m=({text:e,type:a})=>{const t=[a];if("current"===a){const n=o(e,a);n.isSame(l.selectedDay,"day")&&t.push(p.is("selected")),n.isSame(d,"day")&&t.push(p.is("today"))}return t};return a({getFormattedDate:o}),(e,a)=>(h(),g("table",{class:_([w(u).b(),w(u).is("range",w(n))]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?b("v-if",!0):(h(),g("thead",{key:0},[k("tr",null,[(h(!0),g(D,null,j(w(s),(e=>(h(),g("th",{key:e,scope:"col"},x(e),1)))),128))])])),k("tbody",null,[(h(!0),g(D,null,j(w(r),((a,t)=>(h(),g("tr",{key:t,class:_({[w(u).e("row")]:!0,[w(u).em("row","hide-border")]:0===t&&e.hideHeader})},[(h(!0),g(D,null,j(a,((a,t)=>(h(),g("td",{key:t,class:_(m(a)),onClick:e=>w(i)(a)},[k("div",{class:_(w(p).b())},[O(e.$slots,"date-cell",{data:w(c)(a)},(()=>[k("span",null,x(a.text),1)]))],2)],10,["onClick"])))),128))],2)))),128))])],2))}})),[["__file","date-table.vue"]]);const se=c({modelValue:{type:Date},range:{type:u(Array),validator:e=>Y(e)&&2===e.length&&e.every((e=>C(e)))}}),oe={[K]:e=>C(e),[B]:e=>C(e)},ie=v({name:"ElCalendar"});const ce=R(y(v(o(s({},ie),{props:se,emits:oe,setup(e,{expose:a,emit:t}){const l=e,n=f("calendar"),{calculateValidatedDateRange:d,date:r,pickDay:s,realSelectedDay:o,selectDate:i,validatedRange:c}=((e,a)=>{const{lang:t}=p(),l=V(),n=T().locale(t.value),d=m({get:()=>e.modelValue?s.value:l.value,set(e){if(!e)return;l.value=e;const t=e.toDate();a(B,t),a(K,t)}}),r=m((()=>{if(!e.range||!Y(e.range)||2!==e.range.length||e.range.some((e=>!C(e))))return[];const a=e.range.map((e=>T(e).locale(t.value))),[l,n]=a;return l.isAfter(n)?[]:l.isSame(n,"month")?y(l,n):l.add(1,"month").month()!==n.month()?[]:y(l,n)})),s=m((()=>e.modelValue?T(e.modelValue).locale(t.value):d.value||(r.value.length?r.value[0][0]:n))),o=m((()=>s.value.subtract(1,"month").date(1))),i=m((()=>s.value.add(1,"month").date(1))),c=m((()=>s.value.subtract(1,"year").date(1))),u=m((()=>s.value.add(1,"year").date(1))),y=(e,a)=>{const t=e.startOf("week"),l=a.endOf("week"),n=t.get("month"),d=l.get("month");return n===d?[[t,l]]:(n+1)%12===d?((e,a)=>{const t=e.endOf("month"),l=a.startOf("month"),n=t.isSame(l,"week");return[[e,t],[(n?l.add(1,"week"):l).startOf("week"),a]]})(t,l):n+2===d||(n+1)%11===d?((e,a)=>{const t=e.endOf("month"),l=e.add(1,"month").startOf("month"),n=t.isSame(l,"week")?l.add(1,"week"):l,d=n.endOf("month"),r=a.startOf("month"),s=d.isSame(r,"week")?r.add(1,"week"):r;return[[e,t],[n.startOf("week"),d],[s.startOf("week"),a]]})(t,l):[]},v=e=>{d.value=e};return{calculateValidatedDateRange:y,date:s,realSelectedDay:d,pickDay:v,selectDate:e=>{const a={"prev-month":o.value,"next-month":i.value,"prev-year":c.value,"next-year":u.value,today:n}[e];a.isSame(s.value,"day")||v(a)},validatedRange:r}})(l,t),{t:u}=p(),y=m((()=>{const e=`el.datepicker.month${r.value.format("M")}`;return`${r.value.year()} ${u("el.datepicker.year")} ${u(e)}`}));return a({selectedDay:o,pickDay:s,selectDate:i,calculateValidatedDateRange:d}),(e,a)=>(h(),g("div",{class:_(w(n).b())},[k("div",{class:_(w(n).e("header"))},[O(e.$slots,"header",{date:w(y)},(()=>[k("div",{class:_(w(n).e("title"))},x(w(y)),3),0===w(c).length?(h(),g("div",{key:0,class:_(w(n).e("button-group"))},[$(w(q),null,{default:S((()=>[$(w(F),{size:"small",onClick:e=>w(i)("prev-month")},{default:S((()=>[M(x(w(u)("el.datepicker.prevMonth")),1)])),_:1},8,["onClick"]),$(w(F),{size:"small",onClick:e=>w(i)("today")},{default:S((()=>[M(x(w(u)("el.datepicker.today")),1)])),_:1},8,["onClick"]),$(w(F),{size:"small",onClick:e=>w(i)("next-month")},{default:S((()=>[M(x(w(u)("el.datepicker.nextMonth")),1)])),_:1},8,["onClick"])])),_:1})],2)):b("v-if",!0)]))],2),0===w(c).length?(h(),g("div",{key:0,class:_(w(n).e("body"))},[$(re,{date:w(r),"selected-day":w(o),onPick:w(s)},P({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:S((a=>[O(e.$slots,"date-cell",U(E(a)))]))}:void 0]),1032,["date","selected-day","onPick"])],2)):(h(),g("div",{key:1,class:_(w(n).e("body"))},[(h(!0),g(D,null,j(w(c),((a,t)=>(h(),I(re,{key:t,date:a[0],"selected-day":w(o),range:a,"hide-header":0!==t,onPick:w(s)},P({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:S((a=>[O(e.$slots,"date-cell",U(E(a)))]))}:void 0]),1032,["date","selected-day","range","hide-header","onPick"])))),128))],2))],2))}})),[["__file","calendar.vue"]])),ue={class:"page-content"},pe=["onClick"],me={class:"calendar-date"},ye={class:"calendar-events"},ve=["onClick"],fe={class:"dialog-footer"},ge=ae(v({__name:"index",setup(e){const a=[{label:"基本",value:"bg-primary"},{label:"成功",value:"bg-success"},{label:"警告",value:"bg-warning"},{label:"危险",value:"bg-danger"}],t=V(new Date("2025-02-07")),l=V([{date:"2025-02-01",content:"产品需求评审",type:"bg-primary"},{date:"2025-02-03",endDate:"2025-02-05",content:"项目周报会议（跨日期）",type:"bg-primary"},{date:"2025-02-10",content:"瑜伽课程",type:"bg-success"},{date:"2025-02-15",content:"团队建设活动",type:"bg-primary"},{date:"2025-02-20",content:"健身训练",type:"bg-success"},{date:"2025-02-20",content:"代码评审",type:"bg-danger"},{date:"2025-02-20",content:"团队午餐",type:"bg-primary"},{date:"2025-02-20",content:"项目进度汇报",type:"bg-warning"},{date:"2025-02-28",content:"月度总结会",type:"bg-warning"}]),n=V(!1),d=V("添加事件"),r=V(-1),o=V({date:"",endDate:"",content:"",type:"bg-primary"}),i=m((()=>r.value>=0)),c=()=>{o.value={date:"",endDate:"",content:"",type:"bg-primary"},r.value=-1},u=()=>{o.value.content&&o.value.date&&(i.value?l.value[r.value]=s({},o.value):l.value.push(s({},o.value)),n.value=!1,c())},p=()=>{i.value&&(l.value.splice(r.value,1),n.value=!1,c())};return(e,m)=>{const y=ce,v=X,f=N,O=Q,V=Z,Y=J,C=L,P=F,U=ee;return h(),g("div",ue,[$(y,{modelValue:w(t),"onUpdate:modelValue":m[0]||(m[0]=e=>z(t)?t.value=e:null)},{"date-cell":S((({data:e})=>{return[k("div",{class:_(["calendar-cell",{"is-selected":e.isSelected}]),onClick:a=>{return t=e.day,d.value="添加事件",o.value={date:t,content:"",type:"bg-primary"},r.value=-1,void(n.value=!0);var t}},[k("p",me,x((t=e.day,t.split("-")[2])),1),k("div",ye,[(h(!0),g(D,null,j((a=e.day,l.value.filter((e=>{const t=new Date(e.date),l=new Date(a),n=e.endDate?new Date(e.endDate):new Date(e.date);return l>=t&&l<=n}))),(e=>(h(),g("div",{key:`${e.date}-${e.content}`,class:"calendar-event",onClick:A((a=>(e=>{d.value="编辑事件",o.value=s({},e),r.value=l.value.findIndex((a=>a.date===e.date&&a.content===e.content)),n.value=!0})(e)),["stop"])},[k("div",{class:_(["event-tag",[`${e.type||"bg-primary"}`]])},x(e.content),3)],8,ve)))),128))])],10,pe)];var a,t})),_:1},8,["modelValue"]),$(U,{modelValue:w(n),"onUpdate:modelValue":m[5]||(m[5]=e=>z(n)?n.value=e:null),title:w(d),width:"600px",onClosed:c},{footer:S((()=>[k("span",fe,[w(i)?(h(),I(P,{key:0,type:"danger",onClick:p},{default:S((()=>m[6]||(m[6]=[M(" 删除 ")]))),_:1,__:[6]})):b("",!0),$(P,{type:"primary",onClick:u},{default:S((()=>[M(x(w(i)?"更新":"添加"),1)])),_:1})])])),default:S((()=>[$(C,{model:w(o),"label-width":"80px"},{default:S((()=>[$(f,{label:"活动标题",required:""},{default:S((()=>[$(v,{modelValue:w(o).content,"onUpdate:modelValue":m[1]||(m[1]=e=>w(o).content=e),placeholder:"请输入活动标题"},null,8,["modelValue"])])),_:1}),$(f,{label:"事件颜色"},{default:S((()=>[$(V,{modelValue:w(o).type,"onUpdate:modelValue":m[2]||(m[2]=e=>w(o).type=e)},{default:S((()=>[(h(),g(D,null,j(a,(e=>$(O,{key:e.value,value:e.value},{default:S((()=>[M(x(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1}),$(f,{label:"开始日期",required:""},{default:S((()=>[$(Y,{style:{width:"100%"},modelValue:w(o).date,"onUpdate:modelValue":m[3]||(m[3]=e=>w(o).date=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),$(f,{label:"结束日期"},{default:S((()=>[$(Y,{style:{width:"100%"},modelValue:w(o).endDate,"onUpdate:modelValue":m[4]||(m[4]=e=>w(o).endDate=e),type:"date",placeholder:"选择结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","min-date":w(o).date},null,8,["modelValue","min-date"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-d442f1d9"]]);export{ge as default};
