var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(n,t,a)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a;import{d as o,aK as u,a as d,c as r,aA as c,e as m,f as p,z as b,X as y,C as h,J as f,h as x,g as v,u as w,F as g,D as k,i as L,k as D,m as M,ab as P}from"./index-IQGo8WxO.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";const E={class:"menu-right"},H=["onClick"],O=["innerHTML"],W={class:"menu-label"},$={class:"submenu-title"},j=["innerHTML"],_={class:"menu-label"},I=["onClick"],R=["innerHTML"],C={class:"menu-label"},A=o((X=((e,n)=>{for(var t in n||(n={}))i.call(n,t)&&l(e,t,n[t]);if(a)for(var t of a(n))s.call(n,t)&&l(e,t,n[t]);return e})({},{name:"ArtMenuRight"}),n(X,t({__name:"index",props:{menuItems:{},menuWidth:{default:120},submenuWidth:{default:150},itemHeight:{default:32},boundaryDistance:{default:10},menuPadding:{default:5},itemPaddingX:{default:6},borderRadius:{default:6},animationDuration:{default:100}},emits:["select","show","hide"],setup(e,{expose:n,emit:t}){u((e=>({"03a3f243":a.menuWidth+"px","4122aad2":a.borderRadius+"px","78ce3298":a.animationDuration+"ms"})));const a=e,i=t,s=d(!1),l=d({x:0,y:0});let o=null,T=!1;const A=r((()=>({position:"fixed",left:`${l.value.x}px`,top:`${l.value.y}px`,zIndex:2e3,width:`${a.menuWidth}px`}))),X=r((()=>({padding:`${a.menuPadding}px`}))),z=r((()=>({height:`${a.itemHeight}px`,padding:`0 ${a.itemPaddingX}px`,borderRadius:"4px"}))),S=r((()=>({minWidth:`${a.submenuWidth}px`,padding:`${a.menuPadding}px 0`,borderRadius:`${a.borderRadius}px`}))),q=e=>{const n=window.innerWidth,t=window.innerHeight,i=(()=>{let e=2*a.menuPadding;return a.menuItems.forEach((n=>{e+=a.itemHeight,n.showLine&&(e+=10)})),e})();let s=e.clientX,l=e.clientY;return s+a.menuWidth>n-a.boundaryDistance&&(s=Math.max(a.boundaryDistance,s-a.menuWidth)),l+i>t-a.boundaryDistance&&(l=Math.max(a.boundaryDistance,t-i-a.boundaryDistance)),s=Math.max(a.boundaryDistance,Math.min(s,n-a.menuWidth-a.boundaryDistance)),l=Math.max(a.boundaryDistance,Math.min(l,t-i-a.boundaryDistance)),{x:s,y:l}},B=()=>{T&&(document.removeEventListener("click",F),document.removeEventListener("contextmenu",J),document.removeEventListener("keydown",K),T=!1)},F=e=>{const n=e.target,t=document.querySelector(".context-menu");t&&t.contains(n)||Y()},J=()=>{Y()},K=e=>{"Escape"===e.key&&Y()},Y=()=>{s.value&&(s.value=!1,i("hide"),o&&(window.clearTimeout(o),o=null),B())},G=e=>{e.disabled||(i("select",e),Y())},N=e=>{e.style.transformOrigin="top left"},Q=()=>{B(),o&&(window.clearTimeout(o),o=null)};return c((()=>{B(),o&&(window.clearTimeout(o),o=null)})),n({show:e=>{e.preventDefault(),e.stopPropagation(),o&&(window.clearTimeout(o),o=null),l.value=q(e),s.value=!0,i("show"),o=window.setTimeout((()=>{s.value&&(T||(document.addEventListener("click",F),document.addEventListener("contextmenu",J),document.addEventListener("keydown",K),T=!0)),o=null}),50)},hide:Y,visible:r((()=>s.value))}),(e,n)=>(p(),m("div",E,[b(y,{name:"context-menu",onBeforeEnter:N,onAfterLeave:Q},{default:h((()=>[f(x("div",{style:v(w(A)),class:"context-menu"},[x("ul",{class:"menu-list",style:v(w(X))},[(p(!0),m(g,null,k(e.menuItems,(e=>(p(),m(g,{key:e.key},[e.children?(p(),m("li",{key:1,class:"menu-item submenu",style:v(w(z))},[x("div",$,[e.icon?(p(),m("i",{key:0,class:"iconfont-sys",innerHTML:e.icon},null,8,j)):D("",!0),x("span",_,M(e.label),1),n[0]||(n[0]=x("i",{class:"iconfont-sys submenu-arrow"},"юбе",-1))]),x("ul",{class:"submenu-list",style:v(w(S))},[(p(!0),m(g,null,k(e.children,(e=>(p(),m("li",{key:e.key,class:L(["menu-item",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:v(w(z)),onClick:n=>G(e)},[e.icon?(p(),m("i",{key:0,class:"iconfont-sys",innerHTML:e.icon},null,8,R)):D("",!0),x("span",C,M(e.label),1)],14,I)))),128))],4)],4)):(p(),m("li",{key:0,class:L(["menu-item",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:v(w(z)),onClick:n=>G(e)},[e.icon?(p(),m("i",{key:0,class:"iconfont-sys",innerHTML:e.icon},null,8,O)):D("",!0),x("span",W,M(e.label),1)],14,H))],64)))),128))],4)],4),[[P,w(s)]])])),_:1})]))}}))));var X;const z=T(A,[["__scopeId","data-v-1f2e2f4a"]]);export{z as A};
