import{a7 as e,aw as t,a,a5 as o,u as n,b3 as l,b9 as u,n as i}from"./index-IQGo8WxO.js";import{i as s}from"./aria-BWz5Vf1b.js";function r(i,{disabled:r,beforeFocus:c,afterFocus:d,beforeBlur:m,afterBlur:v}={}){const p=e(),{emit:f}=p,b=t(),g=a(!1),h=e=>{const t=!!u(c)&&c(e);n(r)||g.value||t||(g.value=!0,f("focus",e),null==d||d())},C=e=>{var t;const a=!!u(m)&&m(e);n(r)||e.relatedTarget&&(null==(t=b.value)?void 0:t.contains(e.relatedTarget))||a||(g.value=!1,f("blur",e),null==v||v())};return o([b,()=>n(r)],(([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))})),l(b,"focus",h,!0),l(b,"blur",C,!0),l(b,"click",(e=>{var t,a;n(r)||s(e.target)||(null==(t=b.value)?void 0:t.contains(document.activeElement))&&b.value!==document.activeElement||null==(a=i.value)||a.focus()}),!0),{isFocused:g,wrapperRef:b,handleFocus:h,handleBlur:C}}function c({afterComposition:e,emit:t}){const o=a(!1),n=e=>{var a;null==t||t("compositionupdate",e);const n=null==(a=e.target)?void 0:a.value,l=n[n.length-1]||"";o.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},l=a=>{null==t||t("compositionend",a),o.value&&(o.value=!1,i((()=>e(a))))};return{isComposing:o,handleComposition:e=>{"compositionend"===e.type?l(e):n(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),o.value=!0},handleCompositionUpdate:n,handleCompositionEnd:l}}export{r as a,c as u};
