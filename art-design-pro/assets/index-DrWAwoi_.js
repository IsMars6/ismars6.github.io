var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(o,a,r)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,n=(e,o)=>{for(var a in o||(o={}))t.call(o,a)&&s(e,a,o[a]);if(r)for(var a of r(o))i.call(o,a)&&s(e,a,o[a]);return e},l=(e,r)=>o(e,a(r));import{_ as d}from"./index-NjuwKTsQ.js";import{_ as p}from"./index-D_a_vnJt.js";import{d as m,c,e as u,f as j,G as f,k as x,u as h,C as g,z as b,F as y,D as v,h as _,aa as k,g as w,as as C,m as O,a as P,y as B,J as S,ab as A,I as V,l as E,a8 as T,dm as z,dn as I,dj as U,cN as D,O as R}from"./index-IQGo8WxO.js";import{u as N}from"./useTable-DJAp-yyG.js";import{A as F}from"./index-KDQQz2mx.js";import{u as W}from"./useAuth-BJqvMcDs.js";import{E as J,a as q,b as G}from"./index-BKZxi3r4.js";import{_ as L}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{_ as M}from"./role-search.vue_vue_type_script_setup_true_lang-WFyZWN3-.js";import X from"./role-edit-dialog-CDiQneow.js";import Y from"./role-permission-dialog-DXF9Cieh.js";import{E as Z}from"./index-D2Y0Mgb1.js";import{E as $}from"./index-BKGyGajh.js";import{E as H}from"./index-BSQc1V3V.js";import{E as K}from"./index-CE6ES6Vp.js";import{E as Q}from"./index-BZ7jpfoU.js";import"./formEnum-BLgiZVxV.js";import"./index-9J3W-hCL.js";import"./index-CGps8DB8.js";import"./index-CAywqtFc.js";import"./error-D_Dr4eZ1.js";import"./index-Bi9RLQBv.js";import"./index-DC4nx5T3.js";import"./index-CVDCfo3G.js";import"./aria-BWz5Vf1b.js";import"./index-CId84KWp.js";import"./use-form-common-props-AkxMGj96.js";import"./_Uint8Array-C6UxRYqY.js";import"./_initCloneObject-9acmKUcz.js";import"./isArrayLikeObject-hcJDj58x.js";import"./isPlainObject-Bv4FPB4y.js";import"./_baseIteratee-BI4Nmsbi.js";import"./isEqual-DovbVL_y.js";import"./castArray-CEnBrsUU.js";import"./debounce-Ce2MWZXC.js";import"./index-6fZG0U-_.js";import"./event-BwRzfsZt.js";import"./use-form-item-M_69vDeD.js";import"./index-BI2hd7RK.js";import"./index-DBDo8sc3.js";import"./index-CbRr1A0z.js";import"./index-D_ZFMFhn.js";import"./index-WiBceMwr.js";import"./token-DWNpOE8r.js";import"./strings-BMKmFQPH.js";import"./index-jcv93Qxd.js";import"./scroll-CpQYakkq.js";import"./vnode-CPGJC5yZ.js";import"./index-lwuhUFm2.js";import"./index-BfOxij12.js";import"./vue-draggable-plus-Ph1K8nJS.js";import"./index-Cr0GNYrc.js";import"./useTableColumns-DkEEMxim.js";import"./refs-B-58sHkE.js";import"./index-Cm0jkZAR.js";import"./index-DRTMnRQ8.js";import"./index-DEh6ra0d.js";import"./index-DvdSgfWH.js";import"./_baseClone-GChKn-ks.js";import"./index-xoN2v133.js";import"./index-bUEe-dxn.js";import"./index-BgexRGDI.js";import"./index-B1KT8ZNG.js";import"./cloneDeep-B9-2UQHO.js";import"./index-BP-4FEep.js";import"./index-Sk3Tdu_Z.js";import"./index-CXRd8D_e.js";import"./index-CHo-omvL.js";import"./validator-3LCelPuQ.js";import"./index-DlgK5ZY7.js";import"./index-ClZ4RRhL.js";import"./use-dialog-HEYsGeDR.js";import"./index-DyKybXYc.js";const ee={class:"btn-more"},oe={class:"dropdown-item-content"},ae=L(m(l(n({},{name:"ArtButtonMore"}),{__name:"index",props:{list:{},auth:{},hasBackground:{type:Boolean,default:!0}},emits:["click"],setup(e,{emit:o}){const{hasAuth:a}=W(),r=e,t=c((()=>r.list.some((e=>!e.auth||a(e.auth))))),i=o;return(e,o)=>{const r=F,s=k,n=q,l=J,d=G;return j(),u("div",ee,[h(t)?(j(),f(d,{key:0},{dropdown:g((()=>[b(l,null,{default:g((()=>[(j(!0),u(y,null,v(e.list,(e=>(j(),u(y,{key:e.key},[!e.auth||h(a)(e.auth)?(j(),f(n,{key:0,disabled:e.disabled,onClick:o=>(e=>{i("click",e)})(e),class:"custom-dropdown-item"},{default:g((()=>[_("div",oe,[e.icon?(j(),f(s,{key:0,size:15,style:w({color:e.iconColor||e.color,margin:0})},{default:g((()=>[(j(),f(C(e.icon)))])),_:2},1032,["style"])):x("",!0),_("span",{style:w({color:e.color})},O(e.label),5)])])),_:2},1032,["disabled","onClick"])):x("",!0)],64)))),128))])),_:1})])),default:g((()=>[b(r,{type:"more",iconBgColor:e.hasBackground?"":"transparent"},null,8,["iconBgColor"])])),_:1})):x("",!0)])}}})),[["__scopeId","data-v-78200c43"]]),re={class:"role-page art-full-height"},te=L(m(l(n({},{name:"Role"}),{__name:"index",setup(e){const o=P({roleName:void 0,roleCode:void 0,description:void 0,enabled:void 0,daterange:void 0}),a=P(!1),s=P(!1),m=P(!1),c=P(void 0),{columns:x,columnChecks:y,data:v,loading:_,pagination:k,getData:C,searchParams:O,resetSearchParams:F,handleSizeChange:W,handleCurrentChange:J,refreshData:q}=N({core:{apiFn:z,apiParams:{current:1,size:20},excludeParams:["daterange"],columnsFactory:()=>[{prop:"roleId",label:"角色ID",width:100},{prop:"roleName",label:"角色名称",minWidth:120},{prop:"roleCode",label:"角色编码",minWidth:120},{prop:"description",label:"角色描述",minWidth:150,showOverflowTooltip:!0},{prop:"enabled",label:"角色状态",width:100,formatter:e=>{const o=e.enabled?{type:"success",text:"启用"}:{type:"warning",text:"禁用"};return T(K,{type:o.type},(()=>o.text))}},{prop:"createTime",label:"创建日期",width:180,sortable:!0},{prop:"operation",label:"操作",width:80,fixed:"right",formatter:e=>T("div",[T(ae,{list:[{key:"permission",label:"菜单权限",icon:I},{key:"edit",label:"编辑角色",icon:U},{key:"delete",label:"删除角色",icon:D,color:"#f56c6c"}],onClick:o=>oe(o,e)})])}]}}),G=P("add"),L=(e,o)=>{s.value=!0,G.value=e,c.value=o},ee=e=>{const o=e,{daterange:a}=o,s=((e,o)=>{var a={};for(var s in e)t.call(e,s)&&o.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&r)for(var s of r(e))o.indexOf(s)<0&&i.call(e,s)&&(a[s]=e[s]);return a})(o,["daterange"]),[d,p]=Array.isArray(a)?a:[null,null];Object.assign(O,l(n({},s),{startTime:d,endTime:p})),C()},oe=(e,o)=>{switch(e.key){case"permission":te(o);break;case"edit":L("edit",o);break;case"delete":ie(o)}},te=e=>{m.value=!0,c.value=e},ie=e=>{Q.confirm(`确定删除角色"${e.roleName}"吗？此操作不可恢复！`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{R.success("删除成功"),q()})).catch((()=>{R.info("已取消删除")}))};return(e,r)=>{const t=$,i=Z,n=p,l=d,C=H,O=B("ripple");return j(),u("div",re,[S(b(M,{modelValue:h(o),"onUpdate:modelValue":r[0]||(r[0]=e=>V(o)?o.value=e:null),onSearch:ee,onReset:h(F)},null,8,["modelValue","onReset"]),[[A,h(a)]]),b(C,{class:"art-table-card",shadow:"never",style:w({"margin-top":h(a)?"12px":"0"})},{default:g((()=>[b(n,{columns:h(y),"onUpdate:columns":r[2]||(r[2]=e=>V(y)?y.value=e:null),showSearchBar:h(a),"onUpdate:showSearchBar":r[3]||(r[3]=e=>V(a)?a.value=e:null),loading:h(_),onRefresh:h(q)},{left:g((()=>[b(i,{wrap:""},{default:g((()=>[S((j(),f(t,{onClick:r[1]||(r[1]=e=>L("add"))},{default:g((()=>r[6]||(r[6]=[E("新增角色")]))),_:1,__:[6]})),[[O]])])),_:1})])),_:1},8,["columns","showSearchBar","loading","onRefresh"]),b(l,{loading:h(_),data:h(v),columns:h(x),pagination:h(k),"onPagination:sizeChange":h(W),"onPagination:currentChange":h(J)},null,8,["loading","data","columns","pagination","onPagination:sizeChange","onPagination:currentChange"])])),_:1},8,["style"]),b(X,{modelValue:h(s),"onUpdate:modelValue":r[4]||(r[4]=e=>V(s)?s.value=e:null),"dialog-type":h(G),"role-data":h(c),onSuccess:h(q)},null,8,["modelValue","dialog-type","role-data","onSuccess"]),b(Y,{modelValue:h(m),"onUpdate:modelValue":r[5]||(r[5]=e=>V(m)?m.value=e:null),"role-data":h(c),onSuccess:h(q)},null,8,["modelValue","role-data","onSuccess"])])}}})),[["__scopeId","data-v-a47e61d0"]]);export{te as default};
