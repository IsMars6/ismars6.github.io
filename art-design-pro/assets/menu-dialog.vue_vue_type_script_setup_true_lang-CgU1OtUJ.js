var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,o)=>{var u=e=>{try{n(a.next(e))}catch(l){o(l)}},d=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,d);n((a=a.apply(e,l)).next())}));import{_ as d}from"./index-BkZM-mZe.js";import{d as n,a as i,cY as s,r,c as m,a5 as p,n as f,G as b,f as h,C as c,z as _,u as v,e as V,k as g,I as x,l as w,F as y,h as T,aB as k,O as U}from"./index-IQGo8WxO.js";import{a as E,E as j}from"./index-DvdSgfWH.js";import{a as B,E as H}from"./index-xoN2v133.js";import{E as I}from"./index-DRTMnRQ8.js";import{E as P}from"./index-DEh6ra0d.js";import{E as O}from"./index-lwuhUFm2.js";import{E as A}from"./index-BP-4FEep.js";import{E as N}from"./index-CHo-omvL.js";import{E as L}from"./index-BKGyGajh.js";import{E as S}from"./index-DlgK5ZY7.js";const q={class:"dialog-footer"},D=n({__name:"menu-dialog",props:{visible:{type:Boolean,default:!1},editData:{},type:{default:"menu"},lockType:{type:Boolean,default:!1}},emits:["update:visible","submit"],setup(e,{emit:n}){const D=e,C=n,M=i(),F=i("menu"),Y=i(!1),$=i(s.UNICODE),z=r({id:0,name:"",path:"",label:"",component:"",icon:"",isEnable:!0,sort:1,isMenu:!0,keepAlive:!0,isHide:!1,isHideTab:!1,link:"",isIframe:!1,showBadge:!1,showTextBadge:"",fixedTab:!1,activePath:"",roles:[],authName:"",authLabel:"",authIcon:"",authSort:1}),G=r({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],label:[{required:!0,message:"输入权限标识",trigger:"blur"}],component:[{required:!1,message:"请输入组件路径",trigger:"blur"}],authName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],authLabel:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}),J=m((()=>{const e="menu"===F.value?"菜单":"权限";return Y.value?`编辑${e}`:`新建${e}`})),R=m((()=>!!Y.value||!(Y.value||"menu"!==F.value||!D.lockType))),W=m({get:()=>z.roles.join(","),set:e=>{z.roles=e?e.split(",").map((e=>e.trim())).filter((e=>e)):[]}}),K=()=>u(this,null,(function*(){M.value&&(yield M.value.validate((e=>u(this,null,(function*(){if(e)try{C("submit",((e,u)=>{for(var d in u||(u={}))a.call(u,d)&&o(e,d,u[d]);if(l)for(var d of l(u))t.call(u,d)&&o(e,d,u[d]);return e})({},z)),U.success((Y.value?"编辑":"新增")+"成功"),Q()}catch(u){U.error((Y.value?"编辑":"新增")+"失败")}})))))})),Q=()=>{C("update:visible",!1)},X=()=>{var e;null==(e=M.value)||e.resetFields(),Object.assign(z,{id:0,name:"",path:"",label:"",component:"",icon:"",isEnable:!0,sort:1,isMenu:!0,keepAlive:!0,isHide:!1,isHideTab:!1,link:"",isIframe:!1,showBadge:!1,showTextBadge:"",fixedTab:!1,activePath:"",roles:[],authName:"",authLabel:"",authIcon:"",authSort:1}),Y.value=!1};return p((()=>D.visible),(e=>{e&&(F.value=D.type,f((()=>{D.editData&&(()=>{var e,l,a,t,o,u,d,n,i,s,r,m,p,f,b,h,c,_,v,V,g,x,w;if(D.editData)if(Y.value=!0,"menu"===F.value){const y=D.editData;z.id=y.id||0,z.name=k((null==(e=y.meta)?void 0:e.title)||""),z.path=y.path||"",z.label=y.name||"",z.component=y.component||"",z.icon=(null==(l=y.meta)?void 0:l.icon)||"",z.sort=(null==(a=y.meta)?void 0:a.sort)||1,z.isMenu=null==(o=null==(t=y.meta)?void 0:t.isMenu)||o,z.keepAlive=null!=(d=null==(u=y.meta)?void 0:u.keepAlive)&&d,z.isHide=null!=(i=null==(n=y.meta)?void 0:n.isHide)&&i,z.isHideTab=null!=(r=null==(s=y.meta)?void 0:s.isHideTab)&&r,z.isEnable=null==(p=null==(m=y.meta)?void 0:m.isEnable)||p,z.link=(null==(f=y.meta)?void 0:f.link)||"",z.isIframe=null!=(h=null==(b=y.meta)?void 0:b.isIframe)&&h,z.showBadge=null!=(_=null==(c=y.meta)?void 0:c.showBadge)&&_,z.showTextBadge=(null==(v=y.meta)?void 0:v.showTextBadge)||"",z.fixedTab=null!=(g=null==(V=y.meta)?void 0:V.fixedTab)&&g,z.activePath=(null==(x=y.meta)?void 0:x.activePath)||"",z.roles=(null==(w=y.meta)?void 0:w.roles)||[]}else{const e=D.editData;z.authName=e.title||"",z.authLabel=e.authMark||"",z.authIcon=e.icon||"",z.authSort=e.sort||1}})()})))})),p((()=>D.type),(e=>{D.visible&&(F.value=e)})),(e,l)=>{const a=H,t=B,o=j,u=O,n=P,i=I,s=d,r=A,m=N,p=E,f=L,k=S;return h(),b(k,{title:v(J),"model-value":e.visible,"onUpdate:modelValue":Q,width:"800px","align-center":"",class:"menu-dialog",onClosed:X},{footer:c((()=>[T("span",q,[_(f,{onClick:Q},{default:c((()=>l[23]||(l[23]=[w("取 消")]))),_:1,__:[23]}),_(f,{type:"primary",onClick:K},{default:c((()=>l[24]||(l[24]=[w("确 定")]))),_:1,__:[24]})])])),default:c((()=>[_(p,{ref_key:"formRef",ref:M,model:v(z),rules:v(G),"label-width":"85px"},{default:c((()=>[_(o,{label:"菜单类型"},{default:c((()=>[_(t,{modelValue:v(F),"onUpdate:modelValue":l[0]||(l[0]=e=>x(F)?F.value=e:null),disabled:v(R)},{default:c((()=>[_(a,{value:"menu",label:"menu"},{default:c((()=>l[21]||(l[21]=[w("菜单")]))),_:1,__:[21]}),_(a,{value:"button",label:"button"},{default:c((()=>l[22]||(l[22]=[w("权限")]))),_:1,__:[22]})])),_:1},8,["modelValue","disabled"])])),_:1}),"menu"===v(F)?(h(),V(y,{key:0},[_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"菜单名称",prop:"name"},{default:c((()=>[_(u,{modelValue:v(z).name,"onUpdate:modelValue":l[1]||(l[1]=e=>v(z).name=e),placeholder:"菜单名称"},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"路由地址",prop:"path"},{default:c((()=>[_(u,{modelValue:v(z).path,"onUpdate:modelValue":l[2]||(l[2]=e=>v(z).path=e),placeholder:"路由地址"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"权限标识",prop:"label"},{default:c((()=>[_(u,{modelValue:v(z).label,"onUpdate:modelValue":l[3]||(l[3]=e=>v(z).label=e),placeholder:"权限标识"},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"组件路径",prop:"component"},{default:c((()=>[_(u,{modelValue:v(z).component,"onUpdate:modelValue":l[4]||(l[4]=e=>v(z).component=e),placeholder:"组件路径"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"图标",prop:"icon"},{default:c((()=>[_(s,{modelValue:v(z).icon,"onUpdate:modelValue":l[5]||(l[5]=e=>v(z).icon=e),iconType:v($),width:"100%"},null,8,["modelValue","iconType"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"角色权限",prop:"roles"},{default:c((()=>[_(u,{modelValue:v(W),"onUpdate:modelValue":l[6]||(l[6]=e=>x(W)?W.value=e:null),placeholder:"角色权限，多个用逗号分隔"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"菜单排序",prop:"sort"},{default:c((()=>[_(r,{modelValue:v(z).sort,"onUpdate:modelValue":l[7]||(l[7]=e=>v(z).sort=e),style:{width:"100%"},min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"外部链接",prop:"link"},{default:c((()=>[_(u,{modelValue:v(z).link,"onUpdate:modelValue":l[8]||(l[8]=e=>v(z).link=e),placeholder:"外部链接/内嵌地址(https://www.baidu.com)"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"文本徽章",prop:"showTextBadge"},{default:c((()=>[_(u,{modelValue:v(z).showTextBadge,"onUpdate:modelValue":l[9]||(l[9]=e=>v(z).showTextBadge=e),placeholder:"文本徽章内容"},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"激活路径",prop:"activePath"},{default:c((()=>[_(u,{modelValue:v(z).activePath,"onUpdate:modelValue":l[10]||(l[10]=e=>v(z).activePath=e),placeholder:"详情页激活选中的菜单路径"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:6},{default:c((()=>[_(o,{label:"是否启用",prop:"isEnable"},{default:c((()=>[_(m,{modelValue:v(z).isEnable,"onUpdate:modelValue":l[11]||(l[11]=e=>v(z).isEnable=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"页面缓存",prop:"keepAlive"},{default:c((()=>[_(m,{modelValue:v(z).keepAlive,"onUpdate:modelValue":l[12]||(l[12]=e=>v(z).keepAlive=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"隐藏菜单",prop:"isHide"},{default:c((()=>[_(m,{modelValue:v(z).isHide,"onUpdate:modelValue":l[13]||(l[13]=e=>v(z).isHide=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"是否内嵌",prop:"isIframe"},{default:c((()=>[_(m,{modelValue:v(z).isIframe,"onUpdate:modelValue":l[14]||(l[14]=e=>v(z).isIframe=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"显示徽章",prop:"showBadge"},{default:c((()=>[_(m,{modelValue:v(z).showBadge,"onUpdate:modelValue":l[15]||(l[15]=e=>v(z).showBadge=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"固定标签",prop:"fixedTab"},{default:c((()=>[_(m,{modelValue:v(z).fixedTab,"onUpdate:modelValue":l[16]||(l[16]=e=>v(z).fixedTab=e)},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:6},{default:c((()=>[_(o,{label:"标签隐藏",prop:"isHideTab"},{default:c((()=>[_(m,{modelValue:v(z).isHideTab,"onUpdate:modelValue":l[17]||(l[17]=e=>v(z).isHideTab=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],64)):g("",!0),"button"===v(F)?(h(),V(y,{key:1},[_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"权限名称",prop:"authName"},{default:c((()=>[_(u,{modelValue:v(z).authName,"onUpdate:modelValue":l[18]||(l[18]=e=>v(z).authName=e),placeholder:"权限名称"},null,8,["modelValue"])])),_:1})])),_:1}),_(n,{span:12},{default:c((()=>[_(o,{label:"权限标识",prop:"authLabel"},{default:c((()=>[_(u,{modelValue:v(z).authLabel,"onUpdate:modelValue":l[19]||(l[19]=e=>v(z).authLabel=e),placeholder:"权限标识"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(i,{gutter:20},{default:c((()=>[_(n,{span:12},{default:c((()=>[_(o,{label:"权限排序",prop:"authSort"},{default:c((()=>[_(r,{modelValue:v(z).authSort,"onUpdate:modelValue":l[20]||(l[20]=e=>v(z).authSort=e),style:{width:"100%"},min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],64)):g("",!0)])),_:1},8,["model","rules"])])),_:1},8,["title","model-value"])}}});export{D as _};
