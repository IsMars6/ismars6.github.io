var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,d=(e,s)=>{for(var a in s||(s={}))l.call(s,a)&&n(e,a,s[a]);if(t)for(var a of t(s))i.call(s,a)&&n(e,a,s[a]);return e},o=(e,t)=>s(e,a(t));import{a4 as u,a0 as c,cG as r,cr as p,_ as v,d as m,bb as f,V as _,a as b,c as h,am as y,bk as g,G as j,f as k,C as A,J as w,h as x,i as R,u as E,k as S,aa as O,j as P,as as z,e as C,l as U,m as L,F as I,z as D,co as M,ab as N,X as $,an as B,S as V,v as J,au as T,y as F,D as G,a2 as X,db as q,dc as H,O as K}from"./index-IQGo8WxO.js";import{u as Y}from"./useAuth-BJqvMcDs.js";import{E as Z}from"./index-CE6ES6Vp.js";import{E as Q}from"./index-BSQc1V3V.js";import{E as W}from"./index-BKGyGajh.js";import{d as ee,e as se}from"./index-DC4nx5T3.js";import{b as ae,E as te,a as le}from"./index-BKZxi3r4.js";import{E as ie}from"./index-CHo-omvL.js";import{a as ne,E as de}from"./index-CGps8DB8.js";import{_ as oe}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./use-form-common-props-AkxMGj96.js";import"./index-BI2hd7RK.js";import"./use-form-item-M_69vDeD.js";import"./index-CId84KWp.js";import"./index-Bi9RLQBv.js";import"./index-CVDCfo3G.js";import"./aria-BWz5Vf1b.js";import"./index-CAywqtFc.js";import"./error-D_Dr4eZ1.js";import"./castArray-CEnBrsUU.js";import"./refs-B-58sHkE.js";import"./validator-3LCelPuQ.js";import"./event-BwRzfsZt.js";import"./_Uint8Array-C6UxRYqY.js";import"./_initCloneObject-9acmKUcz.js";import"./isArrayLikeObject-hcJDj58x.js";import"./isPlainObject-Bv4FPB4y.js";import"./_baseIteratee-BI4Nmsbi.js";import"./isEqual-DovbVL_y.js";import"./debounce-Ce2MWZXC.js";import"./index-6fZG0U-_.js";import"./index-DBDo8sc3.js";const ue=c(d({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:r(p),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:["light","dark"],default:"light"}},ee)),ce={open:()=>!0,close:e=>u(e)||e instanceof Event},re=m({name:"ElAlert"});const pe=B(v(m(o(d({},re),{props:ue,emits:ce,setup(e,{emit:s}){const a=e,{Close:t}=M,l=f(),i=_("alert"),n=b(!1),d=h((()=>p[a.type])),o=h((()=>!(!a.description&&!l.default))),u=e=>{n.value=!1,s("close",e)},{onOpen:c,onClose:r}=se({showAfter:y(a,"showAfter"),hideAfter:y(a,"hideAfter"),autoClose:y(a,"autoClose"),open:()=>{n.value=!0,s("open")},close:u});return g&&c(),(e,s)=>(k(),j($,{name:E(i).b("fade"),persisted:""},{default:A((()=>[w(x("div",{class:R([E(i).b(),E(i).m(e.type),E(i).is("center",e.center),E(i).is(e.effect)]),role:"alert"},[e.showIcon&&(e.$slots.icon||E(d))?(k(),j(E(O),{key:0,class:R([E(i).e("icon"),{[E(i).is("big")]:E(o)}])},{default:A((()=>[P(e.$slots,"icon",{},(()=>[(k(),j(z(E(d))))]))])),_:3},8,["class"])):S("v-if",!0),x("div",{class:R(E(i).e("content"))},[e.title||e.$slots.title?(k(),C("span",{key:0,class:R([E(i).e("title"),{"with-description":E(o)}])},[P(e.$slots,"title",{},(()=>[U(L(e.title),1)]))],2)):S("v-if",!0),E(o)?(k(),C("p",{key:1,class:R(E(i).e("description"))},[P(e.$slots,"default",{},(()=>[U(L(e.description),1)]))],2)):S("v-if",!0),e.closable?(k(),C(I,{key:2},[e.closeText?(k(),C("div",{key:0,class:R([E(i).e("close-btn"),E(i).is("customed")]),onClick:u},L(e.closeText),3)):(k(),j(E(O),{key:1,class:R(E(i).e("close-btn")),onClick:E(r)},{default:A((()=>[D(E(t))])),_:1},8,["class","onClick"]))],64)):S("v-if",!0)],2)],2),[[N,n.value]])])),_:3},8,["name"]))}})),[["__file","alert.vue"]])),ve={class:"button-auth-page"},me={class:"page-header"},fe={class:"current-auth-card"},_e={class:"auth-info"},be={class:"auth-item"},he={class:"auth-item"},ye={class:"permissions-list"},ge={key:0,class:"no-data"},je={class:"role-based-section"},ke={class:"demo-content"},Ae={class:"button-group"},we={class:"button-item"},xe={class:"button-item"},Re={class:"button-item"},Ee={class:"backend-mode-section"},Se={class:"card-header"},Oe={class:"demo-content"},Pe={class:"auth-config-info"},ze={class:"config-display"},Ce={class:"button-group"},Ue={class:"button-item"},Le={class:"button-item"},Ie={class:"button-item"},De={class:"button-item"},Me={class:"mode-note"},Ne={class:"frontend-mode-section"},$e={class:"card-header"},Be={class:"demo-content"},Ve={class:"auth-config-info"},Je={class:"config-display"},Te={class:"button-group"},Fe={class:"button-item"},Ge={class:"button-item"},Xe={class:"button-item"},qe={class:"backend-programmatic-section"},He={class:"card-header"},Ke={class:"demo-content"},Ye={class:"button-group"},Ze={class:"button-item"},Qe={class:"button-item"},We={key:0,class:"operation-area"},es={key:1,class:"no-permission-tip"},ss={class:"button-item"},as={class:"permission-indicators"},ts={class:"comparison-section"},ls={class:"demo-content"},is={class:"comparison-table"},ns=oe(m(o(d({},{name:"PermissionButtonAuth"}),{__name:"index",setup(e){const{hasAuth:s}=Y(),{isFrontendMode:a}=V(),t=J(),l=T(),i=b(!1),n=h((()=>{var e,s;return(null==(s=null==(e=t.info)?void 0:e.roles)?void 0:s[0])||""})),d=h((()=>{var e;return(null==(e=t.info)?void 0:e.buttons)||[]})),o=h((()=>{var e;return(null==(e=t.info)?void 0:e.buttons)||[]})),u=h((()=>Array.isArray(l.meta.authList)?l.meta.authList:[])),c=h((()=>s("edit")||s("delete")||s("export"))),r=h((()=>[{feature:"权限来源",frontend:"用户状态中的 buttons 字段",backend:"路由配置中的 meta.authList"},{feature:"v-auth 指令",frontend:"不可用（前端模式下指令无效）",backend:"可用（根据路由权限配置检查）"},{feature:"hasAuth 方法",frontend:"可用（检查 buttons 数组）",backend:"可用（检查 meta.authList）"},{feature:"权限管理",frontend:"完全由前端控制，灵活度高",backend:"后端统一管理，安全性更高"},{feature:"适用场景",frontend:"快速原型、简单应用",backend:"企业级应用、复杂权限体系"}])),p=e=>({R_SUPER:"超级管理员",R_ADMIN:"管理员",R_USER:"普通用户"}[e]||"未知角色"),v=()=>{s("publish")?K.success("发布成功！"):K.warning("您没有发布权限")},m=e=>{const a={batchEdit:"批量编辑",batchDelete:"批量删除",batchExport:"批量导出"},t=e.replace("batch","").toLowerCase();s(t)?K.success(`${a[e]}操作执行成功！`):K.warning(`您没有${a[e]}权限`)};return(e,t)=>{const l=Z,f=Q,_=W,b=pe,h=O,y=le,g=te,R=ae,P=ie,z=H,M=de,N=ne,$=F("roles"),B=F("auth");return k(),C("div",ve,[x("div",me,[x("h2",null,L(e.$t("menus.examples.permission.buttonAuth")),1),t[1]||(t[1]=x("p",{class:"description"}," 此页面演示按钮级别的权限控制，不同用户身份下可见的按钮会有所不同。权限控制基于用户角色和权限码实现。 ",-1))]),x("div",fe,[D(f,{shadow:"never"},{header:A((()=>t[2]||(t[2]=[x("div",{class:"card-header"},[x("span",null,"当前用户权限信息")],-1)]))),default:A((()=>{return[x("div",_e,[x("div",be,[t[3]||(t[3]=x("span",{class:"label"},"用户角色：",-1)),D(l,{type:(e=n.value,{R_SUPER:"warning",R_ADMIN:"primary",R_USER:"success"}[e]||"info")},{default:A((()=>[U(L(p(n.value)),1)])),_:1},8,["type"])]),x("div",he,[t[4]||(t[4]=x("span",{class:"label"},"权限码：",-1)),x("div",ye,[(k(!0),C(I,null,G(d.value,(e=>(k(),j(l,{key:e,size:"small",type:"info",class:"permission-tag"},{default:A((()=>[U(L(e),1)])),_:2},1024)))),128)),d.value.length?S("",!0):(k(),C("span",ge,"无权限码"))])])])];var e})),_:1})]),x("div",je,[D(f,{shadow:"never"},{header:A((()=>t[5]||(t[5]=[x("div",{class:"card-header"},[x("span",null,"基于角色的权限控制（v-roles 指令）")],-1)]))),default:A((()=>[x("div",ke,[t[12]||(t[12]=x("p",{class:"section-desc"},[U(" 使用 "),x("code",null,"v-roles"),U(" 指令控制按钮显示，只有拥有指定角色的用户才能看到对应按钮。 ")],-1)),x("div",Ae,[x("div",we,[w((k(),j(_,{type:"primary",plain:""},{default:A((()=>t[6]||(t[6]=[U(" 超级管理员可见 ")]))),_:1,__:[6]})),[[$,"R_SUPER"]]),t[7]||(t[7]=x("div",{class:"button-desc"},[x("code",null,"v-roles=\"'R_SUPER'\""),x("span",null,"只有超级管理员可见")],-1))]),x("div",xe,[w((k(),j(_,{type:"warning",plain:""},{default:A((()=>t[8]||(t[8]=[U(" 管理员可见 ")]))),_:1,__:[8]})),[[$,["R_SUPER","R_ADMIN"]]]),t[9]||(t[9]=x("div",{class:"button-desc"},[x("code",null,"v-roles=\"['R_SUPER', 'R_ADMIN']\""),x("span",null,"超级管理员和管理员可见")],-1))]),x("div",Re,[w((k(),j(_,{type:"success",plain:""},{default:A((()=>t[10]||(t[10]=[U(" 所有用户可见 ")]))),_:1,__:[10]})),[[$,["R_SUPER","R_ADMIN","R_USER"]]]),t[11]||(t[11]=x("div",{class:"button-desc"},[x("code",null,"v-roles=\"['R_SUPER', 'R_ADMIN', 'R_USER']\""),x("span",null,"所有已登录用户可见")],-1))])])])])),_:1})]),x("div",Ee,[D(f,{shadow:"never"},{header:A((()=>[x("div",Se,[t[15]||(t[15]=x("span",null,"后端模式权限控制（v-auth 指令）",-1)),E(a)?(k(),j(l,{key:1,type:"info",size:"small"},{default:A((()=>t[14]||(t[14]=[U("非当前模式")]))),_:1,__:[14]})):(k(),j(l,{key:0,type:"success",size:"small"},{default:A((()=>t[13]||(t[13]=[U("当前模式")]))),_:1,__:[13]}))])])),default:A((()=>[x("div",Oe,[t[25]||(t[25]=x("p",{class:"section-desc"},[x("code",null,"v-auth"),U(" 指令在后端模式下根据当前路由的 "),x("code",null,"meta.authList"),U(" 配置检查权限。 权限列表来源于路由元数据，适用于权限配置由后端统一管理的场景。 ")],-1)),x("div",Pe,[t[16]||(t[16]=x("h4",null,"当前路由权限配置：",-1)),x("div",ze,[x("code",null,L(JSON.stringify(u.value,null,2)),1)])]),x("div",Ce,[x("div",Ue,[w((k(),j(_,{type:"primary",plain:""},{default:A((()=>t[17]||(t[17]=[U(" 新增 ")]))),_:1,__:[17]})),[[B,"add"]]),t[18]||(t[18]=x("div",{class:"button-desc"},[x("code",null,"v-auth=\"'add'\""),x("span",null,"检查路由 meta.authList 中是否存在 authMark: 'add'")],-1))]),x("div",Le,[w((k(),j(_,{type:"warning",plain:""},{default:A((()=>t[19]||(t[19]=[U(" 编辑 ")]))),_:1,__:[19]})),[[B,"edit"]]),t[20]||(t[20]=x("div",{class:"button-desc"},[x("code",null,"v-auth=\"'edit'\""),x("span",null,"检查路由 meta.authList 中是否存在 authMark: 'edit'")],-1))]),x("div",Ie,[w((k(),j(_,{type:"danger",plain:""},{default:A((()=>t[21]||(t[21]=[U(" 删除 ")]))),_:1,__:[21]})),[[B,"delete"]]),t[22]||(t[22]=x("div",{class:"button-desc"},[x("code",null,"v-auth=\"'delete'\""),x("span",null,"检查路由 meta.authList 中是否存在 authMark: 'delete'")],-1))]),x("div",De,[w((k(),j(_,{type:"info",plain:""},{default:A((()=>t[23]||(t[23]=[U(" 导出 ")]))),_:1,__:[23]})),[[B,"export"]]),t[24]||(t[24]=x("div",{class:"button-desc"},[x("code",null,"v-auth=\"'export'\""),x("span",null,"检查路由 meta.authList 中是否存在 authMark: 'export'")],-1))])]),x("div",Me,[D(b,{type:E(a)?"warning":"success",title:E(a)?"注意：当前为前端模式，v-auth 指令在后端模式下才生效":"当前为后端模式，v-auth 指令正常工作","show-icon":"",closable:!1},null,8,["type","title"])])])])),_:1})]),x("div",Ne,[D(f,{shadow:"never"},{header:A((()=>[x("div",$e,[t[28]||(t[28]=x("span",null,"前端模式权限控制（hasAuth 方法）",-1)),E(a)?(k(),j(l,{key:0,type:"success",size:"small"},{default:A((()=>t[26]||(t[26]=[U("当前模式")]))),_:1,__:[26]})):(k(),j(l,{key:1,type:"info",size:"small"},{default:A((()=>t[27]||(t[27]=[U("非当前模式")]))),_:1,__:[27]}))])])),default:A((()=>[x("div",Be,[t[39]||(t[39]=x("p",{class:"section-desc"},[x("code",null,"hasAuth"),U(" 方法在前端模式下根据用户信息中的 "),x("code",null,"buttons"),U(" 字段检查权限。 权限列表存储在用户状态中，适用于权限完全由前端管理的场景。 ")],-1)),x("div",Ve,[t[29]||(t[29]=x("h4",null,"当前用户权限列表（buttons 字段）：",-1)),x("div",Je,[x("code",null,L(JSON.stringify(o.value,null,2)),1)])]),x("div",Te,[x("div",Fe,[E(s)("view")?(k(),j(_,{key:0,type:"primary"},{default:A((()=>t[30]||(t[30]=[U(" 查看详情 ")]))),_:1,__:[30]})):(k(),j(_,{key:1,type:"info",disabled:""},{default:A((()=>t[31]||(t[31]=[U(" 无查看权限 ")]))),_:1,__:[31]})),t[32]||(t[32]=x("div",{class:"button-desc"},[x("code",null,"v-if=\"hasAuth('view')\""),x("span",null,"检查用户 buttons 数组是否包含 'view'")],-1))]),x("div",Ge,[D(_,{disabled:!E(s)("publish"),type:E(s)("publish")?"success":"info",onClick:v},{default:A((()=>[U(L(E(s)("publish")?"发布":"无发布权限"),1)])),_:1},8,["disabled","type"]),t[33]||(t[33]=x("div",{class:"button-desc"},[x("code",null,":disabled=\"!hasAuth('publish')\""),x("span",null,"检查用户 buttons 数组是否包含 'publish'")],-1))]),x("div",Xe,[D(R,{onCommand:m,disabled:!c.value},{dropdown:A((()=>[D(g,null,{default:A((()=>[D(y,{command:"batchEdit",disabled:!E(s)("edit")},{default:A((()=>t[35]||(t[35]=[U(" 批量编辑 ")]))),_:1,__:[35]},8,["disabled"]),D(y,{command:"batchDelete",disabled:!E(s)("delete")},{default:A((()=>t[36]||(t[36]=[U(" 批量删除 ")]))),_:1,__:[36]},8,["disabled"]),D(y,{command:"batchExport",disabled:!E(s)("export")},{default:A((()=>t[37]||(t[37]=[U(" 批量导出 ")]))),_:1,__:[37]},8,["disabled"])])),_:1})])),default:A((()=>[D(_,{type:c.value?"warning":"info"},{default:A((()=>[t[34]||(t[34]=U(" 批量操作 ")),D(h,{class:"el-icon--right"},{default:A((()=>[D(E(X))])),_:1})])),_:1,__:[34]},8,["type"])])),_:1},8,["disabled"]),t[38]||(t[38]=x("div",{class:"button-desc"},[x("code",null,"computed(() => hasAuth('edit') || hasAuth('delete'))"),x("span",null,"复合权限检查，检查多个权限的并集")],-1))])])])])),_:1})]),x("div",qe,[D(f,{shadow:"never"},{header:A((()=>[x("div",He,[t[42]||(t[42]=x("span",null,"后端模式权限控制（hasAuth 方法）",-1)),E(a)?(k(),j(l,{key:1,type:"info",size:"small"},{default:A((()=>t[41]||(t[41]=[U("非当前模式")]))),_:1,__:[41]})):(k(),j(l,{key:0,type:"success",size:"small"},{default:A((()=>t[40]||(t[40]=[U("当前模式")]))),_:1,__:[40]}))])])),default:A((()=>[x("div",Ke,[t[52]||(t[52]=x("p",{class:"section-desc"},[x("code",null,"hasAuth"),U(" 方法在后端模式下根据当前路由的 "),x("code",null,"meta.authList"),U(" 配置检查权限。与 v-auth 指令使用相同的权限来源，但提供编程式的权限检查能力。 ")],-1)),x("div",Ye,[x("div",Ze,[D(P,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),disabled:!E(s)("config"),"active-text":"功能开启","inactive-text":"功能关闭"},null,8,["modelValue","disabled"]),t[43]||(t[43]=x("div",{class:"button-desc"},[x("code",null,":disabled=\"!hasAuth('config')\""),x("span",null,"检查路由权限控制功能开关")],-1))]),x("div",Qe,[E(s)("manage")?(k(),C("div",We,[D(_,{type:"primary",size:"small"},{default:A((()=>t[44]||(t[44]=[U("管理操作")]))),_:1,__:[44]}),D(_,{type:"warning",size:"small"},{default:A((()=>t[45]||(t[45]=[U("高级设置")]))),_:1,__:[45]})])):(k(),C("div",es,[D(h,null,{default:A((()=>[D(E(q))])),_:1}),t[46]||(t[46]=x("span",null,"需要管理权限才能查看此区域",-1))])),t[47]||(t[47]=x("div",{class:"button-desc"},[x("code",null,"v-if=\"hasAuth('manage')\""),x("span",null,"基于后端路由权限的条件渲染")],-1))]),x("div",ss,[x("div",as,[D(z,{value:E(s)("add")?"✓":"✗",type:E(s)("add")?"success":"danger"},{default:A((()=>[D(_,{size:"small"},{default:A((()=>t[48]||(t[48]=[U("新增权限")]))),_:1,__:[48]})])),_:1},8,["value","type"]),D(z,{value:E(s)("edit")?"✓":"✗",type:E(s)("edit")?"success":"danger"},{default:A((()=>[D(_,{size:"small"},{default:A((()=>t[49]||(t[49]=[U("编辑权限")]))),_:1,__:[49]})])),_:1},8,["value","type"]),D(z,{value:E(s)("delete")?"✓":"✗",type:E(s)("delete")?"success":"danger"},{default:A((()=>[D(_,{size:"small"},{default:A((()=>t[50]||(t[50]=[U("删除权限")]))),_:1,__:[50]})])),_:1},8,["value","type"])]),t[51]||(t[51]=x("div",{class:"button-desc"},[x("code",null,"hasAuth('permission')"),x("span",null,"实时权限状态指示器")],-1))])])])])),_:1})]),x("div",ts,[D(f,{shadow:"never"},{header:A((()=>t[53]||(t[53]=[x("div",{class:"card-header"},[x("span",null,"权限控制模式对比")],-1)]))),default:A((()=>[x("div",ls,[x("div",is,[D(N,{data:r.value,border:""},{default:A((()=>[D(M,{prop:"feature",label:"功能特性",width:"150"}),D(M,{prop:"frontend",label:"前端模式"}),D(M,{prop:"backend",label:"后端模式"})])),_:1},8,["data"])])])])),_:1})])])}}})),[["__scopeId","data-v-13c97781"]]);export{ns as default};
