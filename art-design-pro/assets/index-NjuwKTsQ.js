var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&n(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{cS as u,a as p,d,s as v,c,o as f,n as g,a5 as y,aA as m,e as h,f as b,g as S,i as w,J as x,k as T,aO as z,G as B,b5 as k,C as O,j as _,F as j,D as H,u as C,W as R,h as E,m as I,as as N,l as P,z as $,S as F}from"./index-IQGo8WxO.js";import{T as A}from"./formEnum-BLgiZVxV.js";import{u as D,e as K}from"./index-9J3W-hCL.js";import{E as Z,a as L}from"./index-CGps8DB8.js";import{E as M}from"./index-CbRr1A0z.js";import{E as q}from"./index-D_ZFMFhn.js";import{_ as G}from"./_plugin-vue_export-helper-BCo6x5W8.js";const J=u("tableStore",(()=>{const e=p(A.DEFAULT),a=p(!1),t=p(!1),l=p(!1),o=p(!1);return{tableSize:e,isZebra:a,isBorder:t,isHeaderBackground:l,setTableSize:a=>e.value=a,setIsZebra:e=>a.value=e,setIsBorder:e=>t.value=e,setIsHeaderBackground:e=>l.value=e,isFullScreen:o,setIsFullScreen:e=>o.value=e}}),{persist:{key:"table",storage:localStorage}}),U={key:0},W=G(d(i(s({},{name:"ArtTable"}),{__name:"index",props:{loading:{type:Boolean},columns:{default:()=>[]},pagination:{},paginationOptions:{},emptyHeight:{default:"100%"},emptyText:{default:"暂无数据"},showTableHeader:{type:Boolean,default:!0},data:{},size:{default:void 0},width:{},height:{},maxHeight:{},fit:{type:Boolean,default:!0},stripe:{type:Boolean,default:void 0},border:{type:Boolean,default:void 0},rowKey:{},context:{},showHeader:{type:Boolean,default:!0},showSummary:{type:Boolean},sumText:{},summaryMethod:{},rowClassName:{},rowStyle:{},cellClassName:{},cellStyle:{},headerRowClassName:{},headerRowStyle:{},headerCellClassName:{},headerCellStyle:{},highlightCurrentRow:{type:Boolean},currentRowKey:{},expandRowKeys:{},defaultExpandAll:{type:Boolean},defaultSort:{},tooltipEffect:{},tooltipOptions:{},spanMethod:{},selectOnIndeterminate:{type:Boolean},indent:{},treeProps:{},lazy:{type:Boolean},load:{},className:{},style:{},tableLayout:{},scrollbarAlwaysOn:{type:Boolean},flexible:{type:Boolean},showOverflowTooltip:{type:[Boolean,Object]},tooltipFormatter:{},appendFilterPanelTo:{},scrollbarTabindex:{}},emits:["pagination:size-change","pagination:current-change"],setup(e,{expose:a,emit:t}){const{width:l}=D(),o=p(null),r=p(),n=J(),{isBorder:u,isZebra:d,tableSize:A,isFullScreen:G,isHeaderBackground:W}=v(n),Q=p(0);let V=null;const X=e,Y="prev, pager, next, sizes, jumper, total",ee="prev, pager, next, jumper, total",ae="total, prev, pager, next, sizes, jumper",te={pageSizes:[10,20,30,50,100],align:"center",background:!0,layout:c((()=>l.value<768?Y:l.value<1024?ee:ae)).value,hideOnSinglePage:!1,size:"default",pagerCount:l.value>1200?7:5},le=c((()=>s(s({},te),X.paginationOptions))),oe=c((()=>{var e;return null!=(e=X.border)?e:u.value})),re=c((()=>{var e;return null!=(e=X.stripe)?e:d.value})),ne=c((()=>{var e;return null!=(e=X.size)?e:A.value})),se=c((()=>{var e;return 0===(null==(e=X.data)?void 0:e.length)})),{height:ie}=K(r),ue=c((()=>{let e=0;if(X.showTableHeader){e=(Q.value||44)+(0===ie.value?0:ie.value+be.value)+12}else e=0===ie.value?0:ie.value+be.value;return{height:0===e?"100%":`calc(100% - ${e}px)`}})),pe=c((()=>G.value?"100%":se.value&&!X.loading?X.emptyHeight:X.height?X.height:"100%")),de=c((()=>s({background:W.value?"var(--el-fill-color-lighter)":"var(--art-main-bg-color)"},X.headerCellStyle||{}))),ve=c((()=>X.pagination&&!se.value)),ce=e=>{const a=s({},e);return delete a.useHeaderSlot,delete a.headerSlotName,delete a.useSlot,delete a.slotName,a},fe=e=>{he("pagination:size-change",e)},ge=e=>{he("pagination:current-change",e),ye()},ye=()=>{g((()=>{var e;null==(e=o.value)||e.setScrollTop(0),F().scrollToTop()}))},me=e=>{if(!X.pagination)return e+1;const{current:a,size:t}=X.pagination;return(a-1)*t+e+1},he=t,be=c((()=>X.showTableHeader?6:15)),Se=()=>{try{if(V&&(V.disconnect(),V=null),!X.showTableHeader)return void(Q.value=0);const e=document.getElementById("art-table-header");if(!e)return void(Q.value=44);Q.value=e.offsetHeight,V=new ResizeObserver((a=>{for(const t of a)t.target===e&&(Q.value=t.contentRect.height)})),V.observe(e)}catch(e){Q.value=44}};return f((()=>{g((()=>{Se()}))})),y([()=>X.data,()=>X.showTableHeader],(()=>{g((()=>{Se()}))}),{flush:"post"}),m((()=>{V&&(V.disconnect(),V=null)})),a({scrollToTop:ye,elTableRef:o}),(e,a)=>{var t,l,n,u;const p=z;return b(),h("div",{class:w(["art-table",{"is-empty":se.value}]),style:S(ue.value)},[x((b(),B(C(L),R({ref_key:"elTableRef",ref:o},i(s(s({},e.$attrs),X),{height:pe.value,stripe:re.value,border:oe.value,size:ne.value,headerCellStyle:de.value})),k({empty:O((()=>[e.loading?(b(),h("div",U)):(b(),B(C(M),{key:1,description:e.emptyText,"image-size":120},null,8,["description"]))])),default:O((()=>[(b(!0),h(j,null,H(e.columns,(a=>(b(),h(j,{key:a.prop||a.type},["globalIndex"===a.type?(b(),B(C(Z),R({key:0,ref_for:!0},s({},a)),{default:O((({$index:e})=>[E("span",null,I(me(e)),1)])),_:2},1040)):"expand"===a.type?(b(),B(C(Z),R({key:1,ref_for:!0},ce(a)),{default:O((({row:e})=>[(b(),B(N(a.formatter?a.formatter(e):null)))])),_:2},1040)):(b(),B(C(Z),R({key:2,ref_for:!0},ce(a)),k({_:2},[a.useHeaderSlot&&a.prop?{name:"header",fn:O((t=>[_(e.$slots,a.headerSlotName||`${a.prop}-header`,R({ref_for:!0},i(s({},t),{prop:a.prop,label:a.label})),(()=>[P(I(a.label),1)]),!0)])),key:"0"}:void 0,a.useSlot&&a.prop?{name:"default",fn:O((t=>[_(e.$slots,a.slotName||a.prop,R({ref_for:!0},i(s({},t),{prop:a.prop,value:a.prop?t.row[a.prop]:void 0})),void 0,!0)])),key:"1"}:void 0]),1040))],64)))),128))])),_:2},[e.$slots.default?{name:"default",fn:O((()=>[_(e.$slots,"default",{},void 0,!0)])),key:"0"}:void 0]),1040)),[[p,!!e.loading]]),ve.value?(b(),h("div",{key:0,class:w(["pagination custom-pagination",null==(t=le.value)?void 0:t.align]),ref_key:"paginationRef",ref:r},[$(C(q),R(le.value,{total:null==(l=e.pagination)?void 0:l.total,disabled:e.loading,"page-size":null==(n=e.pagination)?void 0:n.size,"current-page":null==(u=e.pagination)?void 0:u.current,onSizeChange:fe,onCurrentChange:ge}),null,16,["total","disabled","page-size","current-page"])],2)):T("",!0)],6)}}})),[["__scopeId","data-v-ffa5e9ec"]]);export{W as _,J as u};
