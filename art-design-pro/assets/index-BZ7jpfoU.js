var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(o,n,t)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,r=(e,o)=>{for(var n in o||(o={}))a.call(o,n)&&l(e,n,o[n]);if(t)for(var n of t(o))s.call(o,n)&&l(e,n,o[n]);return e},i=(e,o,n)=>new Promise(((t,a)=>{var s=e=>{try{r(n.next(e))}catch(o){a(o)}},l=e=>{try{r(n.throw(e))}catch(o){a(o)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);r((n=n.apply(e,o)).next())}));import{n as c,U as u,_ as d,d as p,x as f,G as m,f as v,C as g,J as b,z as y,h,i as C,az as x,g as E,e as w,k as B,as as k,m as I,K as M,j as T,l as j,ab as P,X as O,co as L,aa as S,cp as z,c as A,a as R,r as _,cq as V,by as $,cr as K,a5 as D,o as H,b as q,b9 as U,a9 as F,t as G,bk as J,bq as W,cs as X,bP as Z,af as N,bD as Q,a4 as Y}from"./index-IQGo8WxO.js";import{E as ee}from"./index-BKGyGajh.js";import{E as oe}from"./index-lwuhUFm2.js";import{E as ne,u as te,a as ae}from"./index-ClZ4RRhL.js";import{E as se}from"./index-CVDCfo3G.js";import{o as le}from"./aria-BWz5Vf1b.js";import{i as re}from"./validator-3LCelPuQ.js";import{u as ie}from"./index-CId84KWp.js";import{u as ce}from"./index-DyKybXYc.js";const ue="_trap-focus-children",de=[],pe=e=>{if(0===de.length)return;const o=de[de.length-1][ue];if(o.length>0&&e.code===u.tab){if(1===o.length)return e.preventDefault(),void(document.activeElement!==o[0]&&o[0].focus());const n=e.shiftKey,t=e.target===o[0],a=e.target===o[o.length-1];t&&n&&(e.preventDefault(),o[o.length-1].focus()),a&&!n&&(e.preventDefault(),o[0].focus())}};var fe=d(p({name:"ElMessageBox",directives:{TrapFocus:{beforeMount(e){e[ue]=le(e),de.push(e),de.length<=1&&document.addEventListener("keydown",pe)},updated(e){c((()=>{e[ue]=le(e)}))},unmounted(){de.shift(),0===de.length&&document.removeEventListener("keydown",pe)}}},components:r({ElButton:ee,ElFocusTrap:se,ElInput:oe,ElOverlay:ne,ElIcon:S},L),inheritAttrs:!1,props:{buttonSize:{type:String,validator:re},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:a,zIndex:s,ns:l,size:u}=z("message-box",A((()=>e.buttonSize))),{t:d}=a,{nextZIndex:p}=s,f=R(!1),m=_({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:V($),cancelButtonLoadingIcon:V($),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:p()}),v=A((()=>{const e=m.type;return{[l.bm("icon",e)]:e&&K[e]}})),g=ie(),b=ie(),y=A((()=>{const e=m.type;return m.icon||e&&K[e]||""})),h=A((()=>!!m.message)),C=R(),x=R(),E=R(),w=R(),B=R(),k=A((()=>m.confirmButtonClass));D((()=>m.inputValue),(o=>i(this,null,(function*(){yield c(),"prompt"===e.boxType&&o&&L()}))),{immediate:!0}),D((()=>f.value),(o=>{var n,t;o&&("prompt"!==e.boxType&&(m.autofocus?E.value=null!=(t=null==(n=B.value)?void 0:n.$el)?t:C.value:E.value=C.value),m.zIndex=p()),"prompt"===e.boxType&&(o?c().then((()=>{var e;w.value&&w.value.$el&&(m.autofocus?E.value=null!=(e=S())?e:C.value:E.value=C.value)})):(m.editorErrorMessage="",m.validateError=!1))}));const I=A((()=>e.draggable)),M=A((()=>e.overflow));function T(){f.value&&(f.value=!1,c((()=>{m.action&&t("action",m.action)})))}ce(C,x,I,M),H((()=>i(this,null,(function*(){yield c(),e.closeOnHashChange&&window.addEventListener("hashchange",T)})))),q((()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",T)}));const j=()=>{e.closeOnClickModal&&O(m.distinguishCancelAndClose?"close":"cancel")},P=ae(j),O=o=>{var n;("prompt"!==e.boxType||"confirm"!==o||L())&&(m.action=o,m.beforeClose?null==(n=m.beforeClose)||n.call(m,o,m,T):T())},L=()=>{if("prompt"===e.boxType){const e=m.inputPattern;if(e&&!e.test(m.inputValue||""))return m.editorErrorMessage=m.inputErrorMessage||d("el.messagebox.error"),m.validateError=!0,!1;const o=m.inputValidator;if(U(o)){const e=o(m.inputValue);if(!1===e)return m.editorErrorMessage=m.inputErrorMessage||d("el.messagebox.error"),m.validateError=!0,!1;if(F(e))return m.editorErrorMessage=e,m.validateError=!0,!1}}return m.editorErrorMessage="",m.validateError=!1,!0},S=()=>{var e,o;const n=null==(e=w.value)?void 0:e.$refs;return null!=(o=null==n?void 0:n.input)?o:null==n?void 0:n.textarea},J=()=>{O("close")};return e.lockScroll&&te(f),W=r({},G(m)),o(W,n({ns:l,overlayEvent:P,visible:f,hasMessage:h,typeClass:v,contentId:g,inputId:b,btnSize:u,iconComponent:y,confirmButtonClasses:k,rootRef:C,focusStartRef:E,headerRef:x,inputRef:w,confirmRef:B,doClose:T,handleClose:J,onCloseRequested:()=>{e.closeOnPressEscape&&J()},handleWrapperClick:j,handleInputEnter:e=>{if("textarea"!==m.inputType)return e.preventDefault(),O("confirm")},handleAction:O,t:d}));var W}}),[["render",function(e,o,n,t,a,s){const l=f("el-icon"),r=f("el-input"),i=f("el-button"),c=f("el-focus-trap"),u=f("el-overlay");return v(),m(O,{name:"fade-in-linear",onAfterLeave:o=>e.$emit("vanish"),persisted:""},{default:g((()=>[b(y(u,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:g((()=>[h("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:C(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[y(c,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:g((()=>[h("div",{ref:"rootRef",class:C([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:E(e.customStyle),tabindex:"-1",onClick:x((()=>{}),["stop"])},[null!==e.title&&void 0!==e.title?(v(),w("div",{key:0,ref:"headerRef",class:C([e.ns.e("header"),{"show-close":e.showClose}])},[h("div",{class:C(e.ns.e("title"))},[e.iconComponent&&e.center?(v(),m(l,{key:0,class:C([e.ns.e("status"),e.typeClass])},{default:g((()=>[(v(),m(k(e.iconComponent)))])),_:1},8,["class"])):B("v-if",!0),h("span",null,I(e.title),1)],2),e.showClose?(v(),w("button",{key:0,type:"button",class:C(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:o=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:M(x((o=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"])},[y(l,{class:C(e.ns.e("close"))},{default:g((()=>[(v(),m(k(e.closeIcon||"close")))])),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):B("v-if",!0)],2)):B("v-if",!0),h("div",{id:e.contentId,class:C(e.ns.e("content"))},[h("div",{class:C(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(v(),m(l,{key:0,class:C([e.ns.e("status"),e.typeClass])},{default:g((()=>[(v(),m(k(e.iconComponent)))])),_:1},8,["class"])):B("v-if",!0),e.hasMessage?(v(),w("div",{key:1,class:C(e.ns.e("message"))},[T(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(v(),m(k(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(v(),m(k(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:g((()=>[j(I(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):B("v-if",!0)],2),b(h("div",{class:C(e.ns.e("input"))},[y(r,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":o=>e.inputValue=o,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:C({invalid:e.validateError}),onKeydown:M(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),h("div",{class:C(e.ns.e("errormsg")),style:E({visibility:e.editorErrorMessage?"visible":"hidden"})},I(e.editorErrorMessage),7)],2),[[P,e.showInput]])],10,["id"]),h("div",{class:C(e.ns.e("btns"))},[e.showCancelButton?(v(),m(i,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:C([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:o=>e.handleAction("cancel"),onKeydown:M(x((o=>e.handleAction("cancel")),["prevent"]),["enter"])},{default:g((()=>[j(I(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):B("v-if",!0),b(y(i,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:C([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:o=>e.handleAction("confirm"),onKeydown:M(x((o=>e.handleAction("confirm")),["prevent"]),["enter"])},{default:g((()=>[j(I(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[P,e.showConfirmButton]])],2)],14,["onClick"])])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])])),_:3},8,["z-index","overlay-class","mask"]),[[P,e.visible]])])),_:3},8,["onAfterLeave"])}],["__file","index.vue"]]);const me=new Map,ve=(e,o,n=null)=>{const t=y(fe,e,U(e.message)||W(e.message)?{default:U(e.message)?e.message:()=>e.message}:null);return t.appContext=n,X(t,o),(e=>{let o=document.body;return e.appendTo&&(F(e.appendTo)&&(o=document.querySelector(e.appendTo)),Q(e.appendTo)&&(o=e.appendTo),Q(o)||(o=document.body)),o})(e).appendChild(o.firstElementChild),t.component},ge=(e,o)=>{const n=document.createElement("div");e.onVanish=()=>{X(null,n),me.delete(a)},e.onAction=o=>{const n=me.get(a);let s;s=e.showInput?{value:a.inputValue,action:o}:o,e.callback?e.callback(s,t.proxy):"cancel"===o||"close"===o?e.distinguishCancelAndClose&&"cancel"!==o?n.reject("close"):n.reject("cancel"):n.resolve(s)};const t=ve(e,n,o),a=t.proxy;for(const s in e)Z(e,s)&&!Z(a.$props,s)&&("closeIcon"===s&&N(e[s])?a[s]=V(e[s]):a[s]=e[s]);return a.visible=!0,a};function be(e,o=null){if(!J)return Promise.reject();let n;return F(e)||W(e)?e={message:e}:n=e.callback,new Promise(((t,a)=>{const s=ge(e,null!=o?o:be._context);me.set(s,{options:e,callback:n,resolve:t,reject:a})}))}const ye={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{be[e]=function(e){return(o,n,t,a)=>{let s="";return N(n)?(t=n,s=""):s=Y(n)?"":n,be(Object.assign(r({title:s,message:o,type:""},ye[e]),t,{boxType:e}),a)}}(e)})),be.close=()=>{me.forEach(((e,o)=>{o.doClose()})),me.clear()},be._context=null;const he=be;he.install=e=>{he._context=e._context,e.config.globalProperties.$msgbox=he,e.config.globalProperties.$messageBox=he,e.config.globalProperties.$alert=he.alert,e.config.globalProperties.$confirm=he.confirm,e.config.globalProperties.$prompt=he.prompt};const Ce=he;export{Ce as E};
