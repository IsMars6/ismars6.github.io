import{T as e,f as a}from"./index-9J3W-hCL.js";import{d as t,c as u,aw as l,a5 as s,aA as r,e as i,f as n,i as v,m as d,n as o}from"./index-IQGo8WxO.js";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";const p="easeOutExpo",m=f(t({__name:"index",props:{target:{default:0},duration:{default:2e3},autoStart:{type:Boolean,default:!0},decimals:{default:0},decimal:{default:"."},separator:{default:""},prefix:{default:""},suffix:{default:""},easing:{default:p},disabled:{type:Boolean,default:!1}},emits:["started","finished","paused","reset"],setup(t,{expose:f,emit:m}){const c=Number.EPSILON,g=t,x=m,b=(e,a,t)=>Number.isFinite(e)?e:t,h=(e,a,t)=>Math.max(a,Math.min(e,t)),S=u((()=>b(g.target,0,0))),_=u((()=>h(b(g.duration,0,2e3),100,6e4))),F=u((()=>h(b(g.decimals,0,0),0,10))),N=u((()=>{const a=g.easing;return a in e?a:p})),M=l(0),$=l(S.value),j=l(!1),B=l(!1),y=l(0),A=a(M,{duration:_,transition:u((()=>e[N.value])),onStarted:()=>{j.value=!0,B.value=!1,x("started",$.value)},onFinished:()=>{j.value=!1,B.value=!1,x("finished",$.value)}}),E=u((()=>{const e=B.value?y.value:A.value;if(!Number.isFinite(e))return`${g.prefix}0${g.suffix}`;const a=((e,a,t,u)=>{let l=a>0?e.toFixed(a):Math.floor(e).toString();if("."!==t&&l.includes(".")&&(l=l.replace(".",t)),u){const e=l.split(t);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,u),l=e.join(t)}return l})(e,F.value,g.decimal,g.separator);return`${g.prefix}${a}${g.suffix}`})),I=()=>{B.value=!1,y.value=0},O=e=>{if(g.disabled)return;const a=void 0!==e?e:$.value;Number.isFinite(a)&&($.value=a,(e=>{const a=B.value?y.value:A.value;return Math.abs(a-e)<c})(a)||(B.value&&(M.value=y.value,I()),o((()=>{M.value=a}))))},P=()=>{(j.value||B.value)&&(M.value=0,I(),x("paused",0))};return s(S,(e=>{g.autoStart&&!g.disabled?O(e):$.value=e}),{immediate:g.autoStart&&!g.disabled}),s((()=>g.disabled),(e=>{e&&j.value&&P()})),r((()=>{j.value&&P()})),f({start:O,pause:()=>{j.value&&!B.value&&(B.value=!0,y.value=A.value,M.value=y.value,x("paused",y.value))},reset:(e=0)=>{const a=b(e,0,0);M.value=a,$.value=a,I(),x("reset")},stop:P,setTarget:e=>{Number.isFinite(e)&&($.value=e,!j.value&&!g.autoStart||g.disabled||O(e))},get isRunning(){return j.value},get isPaused(){return B.value},get currentValue(){return B.value?y.value:A.value},get targetValue(){return $.value},get progress(){const e=B.value?y.value:A.value,a=$.value;return 0===a?0===e?1:0:Math.abs(e/a)}}),(e,a)=>(n(),i("span",{class:v(["art-count-to",{"is-running":j.value}])},d(E.value),3))}}),[["__scopeId","data-v-3323b7a2"]]);export{m as A};
